!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).onflowFcl={})}(this,(function(e){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let r;var o="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:t):e=>(r||(r=Promise.resolve())).then(e).catch((e=>setTimeout((()=>{throw e}),0)));const a=()=>{const e=[];var t;return{async deliver(n){e.push(n),t&&(t(e.shift()),t=void 0)},receive:()=>new Promise((function(n){const r=e.shift();if(r)return n(r);t=n}))}},s="INIT",i="SUBSCRIBE",c="UNSUBSCRIBE",u="UPDATED",l="SNAPSHOT",d="EXIT",f="TERMINATE",p="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||"object"==typeof window&&window.window===window&&window;p.FCL_REGISTRY=null==p.FCL_REGISTRY?{}:p.FCL_REGISTRY;var h=0;const g=5e3,y=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise(((o,a)=>{const s=r.expectReply||!1,i=null!=r.timeout?r.timeout:g;s&&i&&setTimeout((()=>a(new Error(`Timeout: ${i}ms passed without a response.`))),i);const c={to:e,from:r.from,tag:t,data:n,timeout:i,reply:o,reject:a};try{p.FCL_REGISTRY[e]&&p.FCL_REGISTRY[e].mailbox.deliver(c),s||o(!0)}catch(t){console.error("FCL.Actor -- Could Not Deliver Message",c,p.FCL_REGISTRY[e],t)}}))},m=e=>{delete p.FCL_REGISTRY[e]},w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async t=>{"function"==typeof e[s]&&await e[s](t);e:for(;;){const n=await t.receive();try{if(n.tag===d){"function"==typeof e[f]&&await e[f](t,n,n.data||{});break e}await e[n.tag](t,n,n.data||{})}catch(e){console.error(`${t.self()} Error`,n,e)}finally{continue e}}}},b=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null==t&&(t=++h),null!=p.FCL_REGISTRY[t])return t;p.FCL_REGISTRY[t]={addr:t,mailbox:a(),subs:new Set,kvs:{},error:null};const n={self:()=>t,receive:()=>p.FCL_REGISTRY[t].mailbox.receive(),send:function(e,n,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return o.from=t,y(e,n,r,o)},sendSelf:(e,n,r)=>{p.FCL_REGISTRY[t]&&y(t,e,n,r)},broadcast:function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r.from=t;for(let o of p.FCL_REGISTRY[t].subs)y(o,e,n,r)},subscribe:e=>null!=e&&p.FCL_REGISTRY[t].subs.add(e),unsubscribe:e=>null!=e&&p.FCL_REGISTRY[t].subs.delete(e),subscriberCount:()=>p.FCL_REGISTRY[t].subs.size,hasSubs:()=>!!p.FCL_REGISTRY[t].subs.size,put:(e,n)=>{null!=e&&(p.FCL_REGISTRY[t].kvs[e]=n)},get:(e,n)=>{const r=p.FCL_REGISTRY[t].kvs[e];return null==r?n:r},delete:e=>{delete p.FCL_REGISTRY[t].kvs[e]},update:(e,n)=>{null!=e&&(p.FCL_REGISTRY[t].kvs[e]=n(p.FCL_REGISTRY[t].kvs[e]))},keys:()=>Object.keys(p.FCL_REGISTRY[t].kvs),all:()=>p.FCL_REGISTRY[t].kvs,where:e=>Object.keys(p.FCL_REGISTRY[t].kvs).reduce(((n,r)=>e.test(r)?{...n,[r]:p.FCL_REGISTRY[t].kvs[r]}:n),{}),merge:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(e).forEach((n=>p.FCL_REGISTRY[t].kvs[n]=e[n]))},fatalError:e=>{p.FCL_REGISTRY[t].error=e;for(let e of p.FCL_REGISTRY[t].subs)y(e,u)}};return"object"==typeof e&&(e=w(e)),o((async()=>{await e(n),m(t)})),t};function v(e,t,n){t(e);const r="@EXIT",o=b((async t=>{for(t.send(e,i);;){const o=await t.receive(),a=p.FCL_REGISTRY[e].error;if(o.tag===r)return void t.send(e,c);if(a)return n(null,a),void t.send(e,c);n(o.data,null)}}));return()=>y(o,r)}function E(e,t){return t(e),y(e,l,null,{expectReply:!0,timeout:0})}function I(e,t){if(!e){const e=new Error(`INVARIANT ${t}`);e.stack=e.stack.split("\n").filter((e=>!/at invariant/.test(e))).join("\n");for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];throw console.error("\n\n---\n\n",e,"\n\n",...r,"\n\n---\n\n"),e}}const S=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.reduce(((e,t)=>t(e)),e)},k=e=>e&&"object"==typeof e&&!Array.isArray(e),A=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;const o=n.shift();if(k(e)&&k(o))for(const t in o)k(o[t])?(e[t]||Object.assign(e,{[t]:{}}),A(e[t],o[t])):Object.assign(e,{[t]:o[t]});return A(e,...n)},R=e=>Array.isArray(e)?A({},...e):e,T=e=>e.contracts?e.contracts:{},C=(e,t)=>S(R,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.reduce(((t,n)=>({...t,...n(e)})),{})}((e=>t=>{let{deployments:n={},accounts:r={}}=t;const o=n?.[e];return o?Object.entries(o).reduce(((e,t)=>{let[n,o]=t;const a=r[n]?.address;return a?o.reduce(((e,t)=>({...e,[t]:a})),{}):e}),{}):{}})(t),S(T,(e=>t=>Object.entries(t).reduce(((t,n)=>{let[r,o]=n;const a=o?.aliases?.[e];return a&&(t[r]=a),t}),{}))(t))))(e),_=e=>Object.entries(e?.accounts).reduce(((e,t)=>{let[n,r]=t;return!!e||r?.hasOwnProperty("key")&&(o=r?.key,"string"==typeof o&&/^[0-9A-Fa-f]+$/.test(o));var o}),!1),x=e=>k(e)?_(e):e.some(_),O=e=>"local"===e?.toLowerCase()?"emulator":e?.toLowerCase(),P="config",N="PUT_CONFIG",B="GET_CONFIG",U="GET_ALL_CONFIG",L="UPDATE_CONFIG",F="DELETE_CONFIG",D="CLEAR_CONFIG",j="WHERE_CONFIG",G="CONFIG/UPDATED",$=e=>e,M={[N]:(e,t,n)=>{let{key:r,value:o}=n;if(null==r)throw new Error("Missing 'key' for config/put.");e.put(r,o),e.broadcast(G,{...e.all()})},[B]:(e,t,n)=>{let{key:r,fallback:o}=n;if(null==r)throw new Error("Missing 'key' for config/get");t.reply(e.get(r,o))},[U]:(e,t)=>{t.reply({...e.all()})},[L]:(e,t,n)=>{let{key:r,fn:o}=n;if(null==r)throw new Error("Missing 'key' for config/update");e.update(r,o||$),e.broadcast(G,{...e.all()})},[F]:(e,t,n)=>{let{key:r}=n;if(null==r)throw new Error("Missing 'key' for config/delete");e.delete(r),e.broadcast(G,{...e.all()})},[D]:(e,t)=>{let n=Object.keys(e.all());for(let t of n)e.delete(t);e.broadcast(G,{...e.all()})},[j]:(e,t,n)=>{let{pattern:r}=n;if(null==r)throw new Error("Missing 'pattern' for config/where");t.reply(e.where(r))},[i]:(e,t)=>{e.subscribe(t.from),e.send(t.from,G,{...e.all()})},[c]:(e,t)=>{e.unsubscribe(t.from)}};function z(e,t){return y(P,N,{key:e,value:t}),Q()}function q(e,t){return y(P,B,{key:e,fallback:t},{expectReply:!0,timeout:10})}async function Y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!e.length)return t;const[n,...r]=e,o=await q(n);return null==o?Y(r,t):o}function H(){return y(P,U,null,{expectReply:!0,timeout:10})}function K(e){return y(P,L,{key:e,fn:arguments.length>1&&void 0!==arguments[1]?arguments[1]:$}),Q()}function W(e){return y(P,F,{key:e}),Q()}function V(e){return y(P,j,{pattern:e},{expectReply:!0,timeout:10})}function J(e){return v(P,(()=>b(M,P)),e)}function X(e){return y(P,D).then(Q(e))}async function Z(e){const t=await q("flow.network"),n=O(t),{flowJSON:r}=e;if(I(Boolean(r),"config.load -- 'flowJSON' must be defined"),I(n,'Flow Network Required -- In order for FCL to load your contracts please define "flow.network" to "emulator", "local", "testnet", or "mainnet" in your config. See more here: https://developers.flow.com/tools/fcl-js/reference/configure-fcl'),x(r)){const e="emulator"===n;if(re({title:"Private Keys Detected",message:"Private keys should be stored in a separate flow.json file for security. See more here: https://developers.flow.com/tools/flow-cli/security",level:e?ne.warn:ne.error}),!e)return}for(const[e,t]of Object.entries(C(r,n))){const n=`0x${e}`,r=await q(n);r&&r!==t?re({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:ne.warn}):z(n,t);const o=`system.contracts.${e}`,a=await q(o);a&&a!==t?re({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:ne.warn}):z(o,t)}}function Q(e){return null!=e&&"object"==typeof e&&Object.keys(e).map((t=>z(t,e[t]))),{put:z,get:q,all:H,first:Y,update:K,delete:W,where:V,subscribe:J,overload:te,load:Z}}b(M,P),Q.put=z,Q.get=q,Q.all=H,Q.first=Y,Q.update=K,Q.delete=W,Q.where=V,Q.subscribe=J,Q.overload=te,Q.load=Z;const ee=e=>e;function te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ee;return new Promise((async(n,r)=>{const o=await H();try{Q(e);var a=await t(await H());await X(o),n(a)}catch(e){await X(o),r(e)}}))}const ne=Object.freeze({debug:5,info:4,log:3,warn:2,error:1}),re=async e=>{let{title:t,message:n,level:r,always:o=!1}=e;const a=await Q.get("logger.level",ne.warn);if(!o&&a<r)return;const s=(e=>{let{title:t,message:n}=e;return[`\n    %c${t}\n    ============================\n\n    ${n}\n\n    ============================\n    `.replace(/\n[^\S\r\n]+/g,"\n").trim(),,"font-weight:bold;font-family:monospace;"]})({title:t,message:n});switch(r){case ne.debug:console.debug(...s);break;case ne.info:console.info(...s);break;case ne.warn:console.warn(...s);break;case ne.error:console.error(...s);break;default:console.log(...s)}};function oe(e,t){if(!e){const e=new Error(`INVARIANT ${t}`);e.stack=e.stack.split("\n").filter((e=>!/at invariant/.test(e))).join("\n");for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];throw console.error("\n\n---\n\n",e,"\n\n",...r,"\n\n---\n\n"),e}}re.deprecate=e=>{let{pkg:t,subject:n,transition:r,level:o=ne.warn,message:a="",callback:s=null}=e;const i=()=>{return re({title:(t?t+" ":"")+"Deprecation Notice",message:`\n      ${n?`${e=n,e.charAt(0).toUpperCase()+e.slice(1)} is deprecated and will cease to work in future releases${t?" of "+t:""}.`:""}${a?"\n"+a:""}${r?`\nYou can learn more (including a guide on common transition paths) here: ${r}`:""}\n    `.trim(),level:o});var e};return"function"==typeof s?async function(){return await i(),await s(...arguments)}:i()};const ae=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.reduce(((e,t)=>t(e)),e)},se=e=>e&&"object"==typeof e&&!Array.isArray(e),ie=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;const o=n.shift();if(se(e)&&se(o))for(const t in o)se(o[t])?(e[t]||Object.assign(e,{[t]:{}}),ie(e[t],o[t])):Object.assign(e,{[t]:o[t]});return ie(e,...n)},ce=e=>Array.isArray(e)?ie({},...e):e,ue=e=>e.contracts?e.contracts:{},le=(e,t)=>ae(ce,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.reduce(((t,n)=>({...t,...n(e)})),{})}((e=>t=>{let{deployments:n={},accounts:r={}}=t;const o=n?.[e];return o?Object.entries(o).reduce(((e,t)=>{let[n,o]=t;const a=r[n]?.address;return a?o.reduce(((e,t)=>({...e,[t]:a})),{}):e}),{}):{}})(t),ae(ue,(e=>t=>Object.entries(t).reduce(((t,n)=>{let[r,o]=n;const a=o?.aliases?.[e];return a&&(t[r]=a),t}),{}))(t))))(e),de=e=>Object.entries(e?.accounts).reduce(((e,t)=>{let[n,r]=t;return!!e||r?.hasOwnProperty("key")&&(o=r?.key,"string"==typeof o&&/^[0-9A-Fa-f]+$/.test(o));var o}),!1),fe=e=>se(e)?de(e):e.some(de),pe=e=>"local"===e?.toLowerCase()?"emulator":e?.toLowerCase(),he="config",ge="PUT_CONFIG",ye="GET_CONFIG",me="GET_ALL_CONFIG",we="UPDATE_CONFIG",be="DELETE_CONFIG",ve="CLEAR_CONFIG",Ee="WHERE_CONFIG",Ie="CONFIG/UPDATED",Se=e=>e,ke={[ge]:(e,t,n)=>{let{key:r,value:o}=n;if(null==r)throw new Error("Missing 'key' for config/put.");e.put(r,o),e.broadcast(Ie,{...e.all()})},[ye]:(e,t,n)=>{let{key:r,fallback:o}=n;if(null==r)throw new Error("Missing 'key' for config/get");t.reply(e.get(r,o))},[me]:(e,t)=>{t.reply({...e.all()})},[we]:(e,t,n)=>{let{key:r,fn:o}=n;if(null==r)throw new Error("Missing 'key' for config/update");e.update(r,o||Se),e.broadcast(Ie,{...e.all()})},[be]:(e,t,n)=>{let{key:r}=n;if(null==r)throw new Error("Missing 'key' for config/delete");e.delete(r),e.broadcast(Ie,{...e.all()})},[ve]:(e,t)=>{let n=Object.keys(e.all());for(let t of n)e.delete(t);e.broadcast(Ie,{...e.all()})},[Ee]:(e,t,n)=>{let{pattern:r}=n;if(null==r)throw new Error("Missing 'pattern' for config/where");t.reply(e.where(r))},[i]:(e,t)=>{e.subscribe(t.from),e.send(t.from,Ie,{...e.all()})},[c]:(e,t)=>{e.unsubscribe(t.from)}};function Ae(e,t){return y(he,ge,{key:e,value:t}),Ue()}function Re(e,t){return y(he,ye,{key:e,fallback:t},{expectReply:!0,timeout:10})}async function Te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!e.length)return t;const[n,...r]=e,o=await Re(n);return null==o?Te(r,t):o}function Ce(){return y(he,me,null,{expectReply:!0,timeout:10})}function _e(e){return y(he,we,{key:e,fn:arguments.length>1&&void 0!==arguments[1]?arguments[1]:Se}),Ue()}function xe(e){return y(he,be,{key:e}),Ue()}function Oe(e){return y(he,Ee,{pattern:e},{expectReply:!0,timeout:10})}function Pe(e){return v(he,(()=>b(ke,he)),e)}function Ne(e){return y(he,ve).then(Ue(e))}async function Be(e){const t=await Re("flow.network"),n=pe(t),{flowJSON:r}=e;if(oe(Boolean(r),"config.load -- 'flowJSON' must be defined"),oe(n,'Flow Network Required -- In order for FCL to load your contracts please define "flow.network" to "emulator", "local", "testnet", or "mainnet" in your config. See more here: https://developers.flow.com/tools/fcl-js/reference/configure-fcl'),fe(r)){const e="emulator"===n;if(re({title:"Private Keys Detected",message:"Private keys should be stored in a separate flow.json file for security. See more here: https://developers.flow.com/tools/flow-cli/security",level:e?ne.warn:ne.error}),!e)return}for(const[e,t]of Object.entries(le(r,n))){const n=`0x${e}`,r=await Re(n);r&&r!==t?re({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:ne.warn}):Ae(n,t);const o=`system.contracts.${e}`,a=await Re(o);a&&a!==t?re({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:ne.warn}):Ae(o,t)}}function Ue(e){return null!=e&&"object"==typeof e&&Object.keys(e).map((t=>Ae(t,e[t]))),{put:Ae,get:Re,all:Ce,first:Te,update:_e,delete:xe,where:Oe,subscribe:Pe,overload:Fe,load:Be}}b(ke,he),Ue.put=Ae,Ue.get=Re,Ue.all=Ce,Ue.first=Te,Ue.update=_e,Ue.delete=xe,Ue.where=Oe,Ue.subscribe=Pe,Ue.overload=Fe,Ue.load=Be;const Le=e=>e;function Fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Le;return new Promise((async(n,r)=>{const o=await Ce();try{Ue(e);var a=await t(await Ce());await Ne(o),n(a)}catch(e){await Ne(o),r(e)}}))}const De=Object.freeze({debug:5,info:4,log:3,warn:2,error:1}),je=async e=>{let{title:t,message:n,level:r,always:o=!1}=e;const a=await Ue.get("logger.level",De.warn);if(!o&&a<r)return;const s=(e=>{let{title:t,message:n}=e;return[`\n    %c${t}\n    ============================\n\n    ${n}\n\n    ============================\n    `.replace(/\n[^\S\r\n]+/g,"\n").trim(),,"font-weight:bold;font-family:monospace;"]})({title:t,message:n});switch(r){case De.debug:console.debug(...s);break;case De.info:console.info(...s);break;case De.warn:console.warn(...s);break;case De.error:console.error(...s);break;default:console.log(...s)}};function Ge(e,t){if(!e){const e=new Error(`INVARIANT ${t}`);e.stack=e.stack.split("\n").filter((e=>!/at invariant/.test(e))).join("\n");for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];throw console.error("\n\n---\n\n",e,"\n\n",...r,"\n\n---\n\n"),e}}je.deprecate=e=>{let{pkg:t,subject:n,transition:r,level:o=De.warn,message:a="",callback:s=null}=e;const i=()=>{return je({title:(t?t+" ":"")+"Deprecation Notice",message:`\n      ${n?`${e=n,e.charAt(0).toUpperCase()+e.slice(1)} is deprecated and will cease to work in future releases${t?" of "+t:""}.`:""}${a?"\n"+a:""}${r?`\nYou can learn more (including a guide on common transition paths) here: ${r}`:""}\n    `.trim(),level:o});var e};return"function"==typeof s?async function(){return await i(),await s(...arguments)}:i()};for(var $e={},Me={byteLength:function(e){var t=Ve(e),n=t[0],r=t[1];return 3*(n+r)/4-r},toByteArray:function(e){var t,n,r=Ve(e),o=r[0],a=r[1],s=new Ye(function(e,t,n){return 3*(t+n)/4-n}(0,o,a)),i=0,c=a>0?o-4:o;for(n=0;n<c;n+=4)t=qe[e.charCodeAt(n)]<<18|qe[e.charCodeAt(n+1)]<<12|qe[e.charCodeAt(n+2)]<<6|qe[e.charCodeAt(n+3)],s[i++]=t>>16&255,s[i++]=t>>8&255,s[i++]=255&t;2===a&&(t=qe[e.charCodeAt(n)]<<2|qe[e.charCodeAt(n+1)]>>4,s[i++]=255&t);1===a&&(t=qe[e.charCodeAt(n)]<<10|qe[e.charCodeAt(n+1)]<<4|qe[e.charCodeAt(n+2)]>>2,s[i++]=t>>8&255,s[i++]=255&t);return s},fromByteArray:function(e){for(var t,n=e.length,r=n%3,o=[],a=16383,s=0,i=n-r;s<i;s+=a)o.push(Je(e,s,s+a>i?i:s+a));1===r?(t=e[n-1],o.push(ze[t>>2]+ze[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],o.push(ze[t>>10]+ze[t>>4&63]+ze[t<<2&63]+"="));return o.join("")}},ze=[],qe=[],Ye="undefined"!=typeof Uint8Array?Uint8Array:Array,He="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ke=0,We=He.length;Ke<We;++Ke)ze[Ke]=He[Ke],qe[He.charCodeAt(Ke)]=Ke;function Ve(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function Je(e,t,n){for(var r,o,a=[],s=t;s<n;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(ze[(o=r)>>18&63]+ze[o>>12&63]+ze[o>>6&63]+ze[63&o]);return a.join("")}qe["-".charCodeAt(0)]=62,qe["_".charCodeAt(0)]=63;var Xe={};
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Ze(e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++)t.push(Ze(e[n]));var r=$e.Buffer.concat(t);return $e.Buffer.concat([Qe(r.length,192),r])}var o=function(e){if(!$e.Buffer.isBuffer(e)){if("string"==typeof e)return et(e)?$e.Buffer.from((r="string"!=typeof(n=e)?n:et(n)?n.slice(2):n).length%2?"0"+r:r,"hex"):$e.Buffer.from(e);if("number"==typeof e)return e?(t=tt(e),$e.Buffer.from(t,"hex")):$e.Buffer.from([]);if(null==e)return $e.Buffer.from([]);if(e instanceof Uint8Array)return $e.Buffer.from(e);throw new Error("invalid type")}var t;var n;var r;return e}(e);return 1===o.length&&o[0]<128?o:$e.Buffer.concat([Qe(o.length,128),o])}function Qe(e,t){if(e<56)return $e.Buffer.from([e+t]);var n=tt(e),r=tt(t+55+n.length/2);return $e.Buffer.from(r+n,"hex")}function et(e){return"0x"===e.slice(0,2)}function tt(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");var t=e.toString(16);return t.length%2?"0"+t:t}Xe.read=function(e,t,n,r,o){var a,s,i=8*o-r-1,c=(1<<i)-1,u=c>>1,l=-7,d=n?o-1:0,f=n?-1:1,p=e[t+d];for(d+=f,a=p&(1<<-l)-1,p>>=-l,l+=i;l>0;a=256*a+e[t+d],d+=f,l-=8);for(s=a&(1<<-l)-1,a>>=-l,l+=r;l>0;s=256*s+e[t+d],d+=f,l-=8);if(0===a)a=1-u;else{if(a===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),a-=u}return(p?-1:1)*s*Math.pow(2,a-r)},Xe.write=function(e,t,n,r,o,a){var s,i,c,u=8*a-o-1,l=(1<<u)-1,d=l>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:a-1,h=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(i=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+d>=1?f/c:f*Math.pow(2,1-d))*c>=2&&(s++,c/=2),s+d>=l?(i=0,s=l):s+d>=1?(i=(t*c-1)*Math.pow(2,o),s+=d):(i=t*Math.pow(2,d-1)*Math.pow(2,o),s=0));o>=8;e[n+p]=255&i,p+=h,i/=256,o-=8);for(s=s<<o|i,u+=o;u>0;e[n+p]=255&s,p+=h,s/=256,u-=8);e[n+p-h]|=128*g},
/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <https://feross.org>
	 * @license  MIT
	 */
function(e){const t=Me,n=Xe,r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=s,e.SlowBuffer=function(e){+e!=e&&(e=0);return s.alloc(+e)},e.INSPECT_MAX_BYTES=50;const o=2147483647;function a(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,s.prototype),t}function s(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}return i(e,t,n)}function i(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!s.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|p(e,t);let r=a(n);const o=r.write(e,t);o!==n&&(r=r.slice(0,o));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(K(e,Uint8Array)){const t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return l(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(K(e,ArrayBuffer)||e&&K(e.buffer,ArrayBuffer))return d(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(K(e,SharedArrayBuffer)||e&&K(e.buffer,SharedArrayBuffer)))return d(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return s.from(r,t,n);const o=function(e){if(s.isBuffer(e)){const t=0|f(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||W(e.length)?a(0):l(e);if("Buffer"===e.type&&Array.isArray(e.data))return l(e.data)}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return s.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return c(e),a(e<0?0:0|f(e))}function l(e){const t=e.length<0?0:0|f(e.length),n=a(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function d(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,s.prototype),r}function f(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function p(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||K(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Y(e).length;default:if(o)return r?-1:q(e).length;t=(""+t).toLowerCase(),o=!0}}function h(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,n);case"utf8":case"utf-8":return k(this,t,n);case"ascii":return R(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),W(n=+n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,o){let a,s=1,i=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,i/=2,c/=2,n/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){let r=-1;for(a=n;a<i;a++)if(u(e,a)===u(t,-1===r?0:a-r)){if(-1===r&&(r=a),a-r+1===c)return r*s}else-1!==r&&(a-=a-r),r=-1}else for(n+c>i&&(n=i-c),a=n;a>=0;a--){let n=!0;for(let r=0;r<c;r++)if(u(e,a+r)!==u(t,r)){n=!1;break}if(n)return a}return-1}function w(e,t,n,r){n=Number(n)||0;const o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;const a=t.length;let s;for(r>a/2&&(r=a/2),s=0;s<r;++s){const r=parseInt(t.substr(2*s,2),16);if(W(r))return s;e[n+s]=r}return s}function b(e,t,n,r){return H(q(t,e.length-n),e,n,r)}function v(e,t,n,r){return H(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function E(e,t,n,r){return H(Y(t),e,n,r)}function I(e,t,n,r){return H(function(e,t){let n,r,o;const a=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,o=n%256,a.push(o),a.push(r);return a}(t,e.length-n),e,n,r)}function S(e,n,r){return 0===n&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,r))}function k(e,t,n){n=Math.min(e.length,n);const r=[];let o=t;for(;o<n;){const t=e[o];let a=null,s=t>239?4:t>223?3:t>191?2:1;if(o+s<=n){let n,r,i,c;switch(s){case 1:t<128&&(a=t);break;case 2:n=e[o+1],128==(192&n)&&(c=(31&t)<<6|63&n,c>127&&(a=c));break;case 3:n=e[o+1],r=e[o+2],128==(192&n)&&128==(192&r)&&(c=(15&t)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(a=c));break;case 4:n=e[o+1],r=e[o+2],i=e[o+3],128==(192&n)&&128==(192&r)&&128==(192&i)&&(c=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&i,c>65535&&c<1114112&&(a=c))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),o+=s}return function(e){const t=e.length;if(t<=A)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=A));return n}(r)}e.kMaxLength=o,s.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(e,t,n){return i(e,t,n)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(e,t,n){return function(e,t,n){return c(e),e<=0?a(e):void 0!==t?"string"==typeof n?a(e).fill(t,n):a(e).fill(t):a(e)}(e,t,n)},s.allocUnsafe=function(e){return u(e)},s.allocUnsafeSlow=function(e){return u(e)},s.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==s.prototype},s.compare=function(e,t){if(K(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),K(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let o=0,a=Math.min(n,r);o<a;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=s.allocUnsafe(t);let o=0;for(n=0;n<e.length;++n){let t=e[n];if(K(t,Uint8Array))o+t.length>r.length?(s.isBuffer(t)||(t=s.from(t)),t.copy(r,o)):Uint8Array.prototype.set.call(r,t,o);else{if(!s.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,o)}o+=t.length}return r},s.byteLength=p,s.prototype._isBuffer=!0,s.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)g(this,t,t+1);return this},s.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},s.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},s.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?k(this,0,e):h.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){let t="";const n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(e,t,n,r,o){if(K(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;let a=(o>>>=0)-(r>>>=0),i=(n>>>=0)-(t>>>=0);const c=Math.min(a,i),u=this.slice(r,o),l=e.slice(t,n);for(let e=0;e<c;++e)if(u[e]!==l[e]){a=u[e],i=l[e];break}return a<i?-1:i<a?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let a=!1;for(;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":case"latin1":case"binary":return v(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const A=4096;function R(e,t,n){let r="";n=Math.min(e.length,n);for(let o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function T(e,t,n){let r="";n=Math.min(e.length,n);for(let o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function C(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let o="";for(let r=t;r<n;++r)o+=V[e[r]];return o}function _(e,t,n){const r=e.slice(t,n);let o="";for(let e=0;e<r.length-1;e+=2)o+=String.fromCharCode(r[e]+256*r[e+1]);return o}function x(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,r,o,a){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function P(e,t,n,r,o){G(t,r,o,e,n,7);let a=Number(t&BigInt(4294967295));e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,n}function N(e,t,n,r,o){G(t,r,o,e,n,7);let a=Number(t&BigInt(4294967295));e[n+7]=a,a>>=8,e[n+6]=a,a>>=8,e[n+5]=a,a>>=8,e[n+4]=a;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=s,s>>=8,e[n+2]=s,s>>=8,e[n+1]=s,s>>=8,e[n]=s,n+8}function B(e,t,n,r,o,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(e,t,r,o,a){return t=+t,r>>>=0,a||B(e,0,r,4),n.write(e,t,r,o,23,4),r+4}function L(e,t,r,o,a){return t=+t,r>>>=0,a||B(e,0,r,8),n.write(e,t,r,o,52,8),r+8}s.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,s.prototype),r},s.prototype.readUintLE=s.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||x(e,t,this.length);let r=this[e],o=1,a=0;for(;++a<t&&(o*=256);)r+=this[e+a]*o;return r},s.prototype.readUintBE=s.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||x(e,t,this.length);let r=this[e+--t],o=1;for(;t>0&&(o*=256);)r+=this[e+--t]*o;return r},s.prototype.readUint8=s.prototype.readUInt8=function(e,t){return e>>>=0,t||x(e,1,this.length),this[e]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||x(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||x(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||x(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||x(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readBigUInt64LE=J((function(e){$(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||M(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,o=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(o)<<BigInt(32))})),s.prototype.readBigUInt64BE=J((function(e){$(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||M(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],o=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(o)})),s.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||x(e,t,this.length);let r=this[e],o=1,a=0;for(;++a<t&&(o*=256);)r+=this[e+a]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||x(e,t,this.length);let r=t,o=1,a=this[e+--r];for(;r>0&&(o*=256);)a+=this[e+--r]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*t)),a},s.prototype.readInt8=function(e,t){return e>>>=0,t||x(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||x(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){e>>>=0,t||x(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||x(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||x(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readBigInt64LE=J((function(e){$(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||M(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),s.prototype.readBigInt64BE=J((function(e){$(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||M(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),s.prototype.readFloatLE=function(e,t){return e>>>=0,t||x(e,4,this.length),n.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||x(e,4,this.length),n.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||x(e,8,this.length),n.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||x(e,8,this.length),n.read(this,e,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){O(this,e,t,n,Math.pow(2,8*n)-1,0)}let o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){O(this,e,t,n,Math.pow(2,8*n)-1,0)}let o=n-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n},s.prototype.writeUint8=s.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeBigUInt64LE=J((function(e){return P(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),s.prototype.writeBigUInt64BE=J((function(e){return N(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);O(this,e,t,n,r-1,-r)}let o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);O(this,e,t,n,r-1,-r)}let o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeBigInt64LE=J((function(e){return P(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),s.prototype.writeBigInt64BE=J((function(e){return N(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),s.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(!s.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const o=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),o},s.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{const a=s.isBuffer(e)?e:s.from(e,r),i=a.length;if(0===i)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%i]}return this};const F={};function D(e,t,n){F[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function j(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function G(e,t,n,r,o,a){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let o;throw o=a>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(a+1)}${r}`:`>= -(2${r} ** ${8*(a+1)-1}${r}) and < 2 ** ${8*(a+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new F.ERR_OUT_OF_RANGE("value",o,e)}!function(e,t,n){$(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||M(t,e.length-(n+1))}(r,o,a)}function $(e,t){if("number"!=typeof e)throw new F.ERR_INVALID_ARG_TYPE(t,"number",e)}function M(e,t,n){if(Math.floor(e)!==e)throw $(e,n),new F.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new F.ERR_BUFFER_OUT_OF_BOUNDS;throw new F.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}D("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),D("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),D("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>2**32?o=j(String(n)):"bigint"==typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=j(o)),o+="n"),r+=` It must be ${t}. Received ${o}`,r}),RangeError);const z=/[^+/0-9A-Za-z-_]/g;function q(e,t){let n;t=t||1/0;const r=e.length;let o=null;const a=[];for(let s=0;s<r;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&a.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&a.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function Y(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(z,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function H(e,t,n,r){let o;for(o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function K(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function W(e){return e!=e}const V=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let o=0;o<16;++o)t[r+o]=e[n]+e[o]}return t}();function J(e){return"undefined"==typeof BigInt?X:e}function X(){throw new Error("BigInt not supported")}}($e);var nt={exports:{}};!function(e,n){var r="undefined"!=typeof self?self:t,o=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();!function(e){!function(t){var n={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(n.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(e){return e&&r.indexOf(Object.prototype.toString.call(e))>-1};function a(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function s(e){return"string"!=typeof e&&(e=String(e)),e}function i(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n.iterable&&(t[Symbol.iterator]=function(){return t}),t}function c(e){this.map={},e instanceof c?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function u(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function l(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function d(e){var t=new FileReader,n=l(t);return t.readAsArrayBuffer(e),n}function f(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function p(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:n.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:n.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():n.arrayBuffer&&n.blob&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||o(e))?this._bodyArrayBuffer=f(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n.blob&&(this.blob=function(){var e=u(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?u(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(d)}),this.text=function(){var e=u(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=l(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(e,t){e=a(e),t=s(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},c.prototype.delete=function(e){delete this.map[a(e)]},c.prototype.get=function(e){return e=a(e),this.has(e)?this.map[e]:null},c.prototype.has=function(e){return this.map.hasOwnProperty(a(e))},c.prototype.set=function(e,t){this.map[a(e)]=s(t)},c.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},c.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),i(e)},c.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),i(e)},c.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),i(e)},n.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var h=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function g(e,t){var n,r,o=(t=t||{}).body;if(e instanceof g){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new c(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new c(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),h.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function y(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function m(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new c(t.headers),this.url=t.url||"",this._initBody(e)}g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},p.call(g.prototype),p.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var w=[301,302,303,307,308];m.redirect=function(e,t){if(-1===w.indexOf(t))throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function b(e,r){return new Promise((function(o,a){var s=new g(e,r);if(s.signal&&s.signal.aborted)return a(new t.DOMException("Aborted","AbortError"));var i=new XMLHttpRequest;function u(){i.abort()}i.onload=function(){var e,t,n={status:i.status,statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",t=new c,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}})),t)};n.url="responseURL"in i?i.responseURL:n.headers.get("X-Request-URL");var r="response"in i?i.response:i.responseText;o(new m(r,n))},i.onerror=function(){a(new TypeError("Network request failed"))},i.ontimeout=function(){a(new TypeError("Network request failed"))},i.onabort=function(){a(new t.DOMException("Aborted","AbortError"))},i.open(s.method,s.url,!0),"include"===s.credentials?i.withCredentials=!0:"omit"===s.credentials&&(i.withCredentials=!1),"responseType"in i&&n.blob&&(i.responseType="blob"),s.headers.forEach((function(e,t){i.setRequestHeader(t,e)})),s.signal&&(s.signal.addEventListener("abort",u),i.onreadystatechange=function(){4===i.readyState&&s.signal.removeEventListener("abort",u)}),i.send(void 0===s._bodyInit?null:s._bodyInit)}))}b.polyfill=!0,e.fetch||(e.fetch=b,e.Headers=c,e.Request=g,e.Response=m),t.Headers=c,t.Request=g,t.Response=m,t.fetch=b,Object.defineProperty(t,"__esModule",{value:!0})}({})}(o),o.fetch.ponyfill=!0,delete o.fetch.polyfill;var a=o;(n=a.fetch).default=a.fetch,n.fetch=a.fetch,n.Headers=a.Headers,n.Request=a.Request,n.Response=a.Response,e.exports=n}(nt,nt.exports);var rt=n(nt.exports);function ot(e){return null==e?null:e.replace(/^0x/,"").replace(/^Fx/,"")}function at(e){return null==e?null:"0x"+ot(e)}const st=globalThis.AbortController||require("abort-controller");class it extends Error{constructor(e){let{error:t,hostname:n,path:r,method:o,requestBody:a,responseBody:s,responseStatusText:i,statusCode:c}=e;super(`\n      HTTP Request Error: An error occurred when interacting with the Access API.\n      ${t?`error=${t}`:""}\n      ${n?`hostname=${n}`:""}\n      ${r?`path=${r}`:""}\n      ${o?`method=${o}`:""}\n      ${a?`requestBody=${a}`:""}\n      ${s?`responseBody=${s}`:""}\n      ${i?`responseStatusText=${i}`:""}\n      ${c?`statusCode=${c}`:""}\n    `),this.name="HTTP Request Error",this.statusCode=c,this.errorMessage=t}}async function ct(e){let{hostname:t,path:n,method:r,body:o,headers:a,retryLimit:s=5,retryIntervalMs:i=1e3,timeoutLimit:c=3e4}=e;const u=o?JSON.stringify(o):null;function l(){const e=new st,o=setTimeout((()=>{e.abort()}),c);return rt(`${t}${n}`,{method:r,body:u,headers:a,signal:e.signal}).then((async e=>{if(e.ok)return e.json();const o=e.body?await e.text():null,a=function(e){try{return JSON.parse(e)}catch{return null}}(o);throw new it({error:a?.message,hostname:t,path:n,method:r,requestBody:u,responseBody:o,responseStatusText:e.statusText,statusCode:e.status})})).catch((async e=>{if(e instanceof it)throw e;if("AbortError"===e.name)throw e;throw await je({title:"Access Node Error",message:`The provided access node ${t} does not appear to be a valid REST/HTTP access node.\nPlease verify that you are not unintentionally using a GRPC access node.\nSee more here: https://docs.onflow.org/fcl/reference/sdk-guidelines/#connect`,level:De.error}),new it({error:e?.message,hostname:t,path:n,method:r,requestBody:u})})).finally((()=>{clearTimeout(o)}))}return await async function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;try{return await l()}catch(n){const r=[408,429,500,502,503,504];if("AbortError"===n.name||r.includes(n.statusCode))return await new Promise(((r,o)=>{t<s?(console.warn(`Access node unavailable, retrying in ${i} ms...`),setTimeout((()=>{r(e(t+1))}),i)):o(n)}));throw n}}()}function ut(e,t,n){let r=t.response();return r.tag=e.tag,r.encodedData=JSON.parse(t.Buffer.from(n,"base64").toString()),r}async function lt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Ge(n.node,"SDK Send Execute Script Error: opts.node must be defined."),Ge(t.response,"SDK Send Execute Script Error: context.response must be defined."),Ge(t.Buffer,"SDK Send Execute Script Error: context.Buffer must be defined."),(e=await e).block.id?await async function(e,t,n){const r=n.httpRequest||ct,o=await r({hostname:n.node,path:`/v1/scripts?block_id=${e.block.id}`,method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:e.message.arguments.map((n=>t.Buffer.from(JSON.stringify(e.arguments[n].asArgument)).toString("base64")))}});return ut(e,t,o)}(e,t,n):e.block.height?await async function(e,t,n){const r=n.httpRequest||ct,o=await r({hostname:n.node,path:`/v1/scripts?block_height=${e.block.height}`,method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:e.message.arguments.map((n=>t.Buffer.from(JSON.stringify(e.arguments[n].asArgument)).toString("base64")))}});return ut(e,t,o)}(e,t,n):await async function(e,t,n){const r=n.httpRequest||ct,o=await r({hostname:n.node,path:"/v1/scripts?block_height=sealed",method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:e.message.arguments.map((n=>t.Buffer.from(JSON.stringify(e.arguments[n].asArgument)).toString("base64")))}});return ut(e,t,o)}(e,t,n)}const dt={SHA2_256:1,SHA2_384:2,SHA3_256:3,SHA3_384:4,KMAC128_BLS_BLS12_381:5},ft={ECDSA_P256:1,ECDSA_secp256k1:2,BLS_BLS12_381:3};function pt(e,t,n){let r=t.response();r.tag=e.tag;return r.account={address:n.address,balance:Number(n.balance),code:"",contracts:(e=>{const n={};if(!e)return n;for(let r of Object.keys(e))n[r]=t.Buffer.from(e[r],"base64").toString();return n})(n.contracts),keys:n.keys?.map((e=>({index:Number(e.index),publicKey:e.public_key.replace(/^0x/,""),signAlgo:ft[e.signing_algorithm],signAlgoString:e.signing_algorithm,hashAlgo:dt[e.hashing_algorithm],hashAlgoString:e.hashing_algorithm,sequenceNumber:Number(e.sequence_number),weight:Number(e.weight),revoked:e.revoked})))??[]},r}async function ht(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Ge(n.node,"SDK Send Get Account Error: opts.node must be defined."),Ge(t.response,"SDK Send Get Account Error: context.response must be defined."),Ge(t.Buffer,"SDK Send Get Account Error: context.Buffer must be defined."),null!==(e=await e).block.height?await async function(e,t,n){const r=n.httpRequest||ct;return pt(e,t,await r({hostname:n.node,path:`/v1/accounts/${e.account.addr}?block_height=${e.block.height}&expand=contracts,keys`,method:"GET",body:null}))}(e,t,n):await async function(e,t,n){const r=n.httpRequest||ct;return pt(e,t,await r({hostname:n.node,path:`/v1/accounts/${e.account.addr}?block_height=sealed&expand=contracts,keys`,method:"GET",body:null}))}(e,t,n)}function gt(e,t,n){const r=n.length?n[0]:null,o=t.response();return o.tag=e.tag,o.blockHeader={id:r.header.id,parentId:r.header.parent_id,height:Number(r.header.height),timestamp:r.header.timestamp},o}async function yt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ge(n.node,"SDK Send Get Block Header Error: opts.node must be defined."),Ge(t.response,"SDK Send Get Block Header Error: context.response must be defined.");const r=null!==(e=await e).block.id,o=null!==e.block.height;return r?await async function(e,t,n){const r=n.httpRequest||ct;return gt(e,t,await r({hostname:n.node,path:`/v1/blocks/${e.block.id}`,method:"GET",body:null}))}(e,t,n):o?await async function(e,t,n){const r=n.httpRequest||ct;return gt(e,t,await r({hostname:n.node,path:`/v1/blocks?height=${e.block.height}`,method:"GET",body:null}))}(e,t,n):await async function(e,t,n){const r=n.httpRequest||ct,o=e.block?.isSealed?"sealed":"final";return gt(e,t,await r({hostname:n.node,path:`/v1/blocks?height=${o}`,method:"GET",body:null}))}(e,t,n)}function mt(e,t,n){const r=n.length?n[0]:null,o=t.response();return o.tag=e.tag,o.block={id:r.header.id,parentId:r.header.parent_id,height:Number(r.header.height),timestamp:r.header.timestamp,collectionGuarantees:r.payload.collection_guarantees.map((e=>({collectionId:e.collection_id,signerIds:e.signer_ids}))),blockSeals:r.payload.block_seals.map((e=>({blockId:e.block_id,executionReceiptId:e.result_id})))},o}async function wt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ge(n.node,"SDK Send Get Block Error: opts.node must be defined."),Ge(t.response,"SDK Send Get Block Error: context.response must be defined.");const r=null!==(e=await e).block.id,o=null!==e.block.height;return r?await async function(e,t,n){const r=n.httpRequest||ct;return mt(e,t,await r({hostname:n.node,path:`/v1/blocks/${e.block.id}?expand=payload`,method:"GET",body:null}))}(e,t,n):o?await async function(e,t,n){const r=n.httpRequest||ct;return mt(e,t,await r({hostname:n.node,path:`/v1/blocks?height=${e.block.height}&expand=payload`,method:"GET",body:null}))}(e,t,n):await async function(e,t,n){const r=n.httpRequest||ct,o=e.block?.isSealed?"sealed":"final";return mt(e,t,await r({hostname:n.node,path:`/v1/blocks?height=${o}&expand=payload`,method:"GET",body:null}))}(e,t,n)}function bt(e,t,n){let r=t.response();return r.tag=e.tag,r.events=[],n.forEach((e=>e.events?e.events.forEach((n=>r.events.push({blockId:e.block_id,blockHeight:Number(e.block_height),blockTimestamp:e.block_timestamp,type:n.type,transactionId:n.transaction_id,transactionIndex:Number(n.transaction_index),eventIndex:Number(n.event_index),payload:JSON.parse(t.Buffer.from(n.payload,"base64").toString())}))):null)),r}async function vt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ge(n.node,"SDK Send Get Events Error: opts.node must be defined."),Ge(t.response,"SDK Send Get Events Error: context.response must be defined."),Ge(t.Buffer,"SDK Send Get Events Error: context.Buffer must be defined.");const r=null!==(e=await e).events.start,o=Array.isArray(e.events.blockIds)&&e.events.blockIds.length>0;return Ge(r||o,"SendGetEventsError: Unable to determine which get events request to send. Either a block height range, or block IDs must be specified."),r?await async function(e,t,n){const r=n.httpRequest||ct;return bt(e,t,await r({hostname:n.node,path:`/v1/events?type=${e.events.eventType}&start_height=${e.events.start}&end_height=${e.events.end}`,method:"GET",body:null}))}(e,t,n):await async function(e,t,n){const r=n.httpRequest||ct,o=await r({hostname:n.node,path:`/v1/events?type=${e.events.eventType}&block_ids=${e.events.blockIds.join(",")}`,method:"GET",body:null});return bt(e,t,o)}(e,t,n)}const Et={UNKNOWN:0,PENDING:1,FINALIZED:2,EXECUTED:3,SEALED:4,EXPIRED:5};const It=e=>`${withPrefix(e.addr)}-${e.keyId}`;const St=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};switch(Ge(n.node,'SDK Send Error: Either opts.node or "accessNode.api" in config must be defined.'),Ge(t.ix,"SDK Send Error: context.ix must be defined."),e=await e,!0){case t.ix.isTransaction(e):return n.sendTransaction?n.sendTransaction(e,t,n):async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ge(n.node,"SDK Send Transaction Error: opts.node must be defined."),Ge(t.response,"SDK Send Transaction Error: context.response must be defined."),Ge(t.Buffer,"SDK Send Transaction Error: context.Buffer must be defined.");const r=n.httpRequest||ct;e=await e;let o=[];for(let n of Object.values(e.accounts))try{n.role.payer||null==n.signature||o.push({address:ot(n.addr),key_index:String(n.keyId),signature:t.Buffer.from(n.signature,"hex").toString("base64")})}catch(t){throw console.error("SDK HTTP Send Error: Trouble applying payload signature",{acct:n,ix:e}),t}let a={};for(let n of Object.values(e.accounts))try{if(n.role.payer&&null!=n.signature){let e=n.tempId||It(n);a[e]=a[e]||{address:ot(n.addr),key_index:String(n.keyId),signature:t.Buffer.from(n.signature,"hex").toString("base64")}}}catch(t){throw console.error("SDK HTTP Send Error: Trouble applying envelope signature",{acct:n,ix:e}),t}a=Object.values(a);var s=Date.now();const i=await r({hostname:n.node,path:"/v1/transactions",method:"POST",body:{script:t.Buffer.from(e.message.cadence).toString("base64"),arguments:[...e.message.arguments.map((n=>t.Buffer.from(JSON.stringify(e.arguments[n].asArgument)).toString("base64")))],reference_block_id:e.message.refBlock?e.message.refBlock:null,gas_limit:String(e.message.computeLimit),payer:ot(e.accounts[Array.isArray(e.payer)?e.payer[0]:e.payer].addr),proposal_key:{address:ot(e.accounts[e.proposer].addr),key_index:String(e.accounts[e.proposer].keyId),sequence_number:String(e.accounts[e.proposer].sequenceNum)},authorizers:e.authorizations.map((t=>e.accounts[t].addr)).reduce(((e,t)=>e.find((e=>e===t))?e:[...e,t]),[]).map(ot),payload_signatures:o,envelope_signatures:a}});var c=Date.now();let u=t.response();return u.tag=e.tag,u.transactionId=i.id,"undefined"!=typeof window&&"undefined"!=typeof CustomEvent&&window.dispatchEvent(new CustomEvent("FLOW::TX",{detail:{txId:u.transactionId,delta:c-s}})),u}(e,t,n);case t.ix.isGetTransactionStatus(e):return n.sendGetTransactionStatus?n.sendGetTransactionStatus(e,t,n):async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ge(n.node,"SDK Send Get Transaction Status Error: opts.node must be defined."),Ge(t.response,"SDK Send Get Transaction Status Error: context.response must be defined."),Ge(t.Buffer,"SDK Send Get Transaction Status Error: context.Buffer must be defined.");const r=n.httpRequest||ct;e=await e;const o=await r({hostname:n.node,path:`/v1/transaction_results/${e.transaction.id}`,method:"GET",body:null});let a=t.response();return a.tag=e.tag,a.transactionStatus={blockId:o.block_id,status:Et[o.status.toUpperCase()]||"",statusString:o.status.toUpperCase(),statusCode:o.status_code,errorMessage:o.error_message,events:o.events.map((e=>({type:e.type,transactionId:e.transaction_id,transactionIndex:Number(e.transaction_index),eventIndex:Number(e.event_index),payload:JSON.parse(t.Buffer.from(e.payload,"base64").toString())})))},a}(e,t,n);case t.ix.isGetTransaction(e):return n.sendGetTransaction?n.sendGetTransaction(e,t,n):async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ge(n.node,"SDK Send Get Transaction Error: opts.node must be defined."),Ge(t.response,"SDK Send Get Transaction Error: context.response must be defined."),Ge(t.Buffer,"SDK Send Get Transaction Error: context.Buffer must be defined.");const r=n.httpRequest||ct;e=await e;const o=await r({hostname:n.node,path:`/v1/transactions/${e.transaction.id}`,method:"GET",body:null}),a=e=>({address:e.address,keyId:Number(e.key_index),signature:e.signature});let s=t.response();var i;return s.tag=e.tag,s.transaction={script:t.Buffer.from(o.script,"base64").toString(),args:[...o.arguments.map((e=>JSON.parse(t.Buffer.from(e,"base64").toString())))],referenceBlockId:o.reference_block_id,gasLimit:Number(o.gas_limit),payer:o.payer,proposalKey:o.proposal_key?(i=o.proposal_key,{address:i.address,keyId:Number(i.key_id),sequenceNumber:Number(i.sequence_number)}):o.proposal_key,authorizers:o.authorizers,payloadSignatures:[...o.payload_signatures.map(a)],envelopeSignatures:[...o.envelope_signatures.map(a)]},s}(e,t,n);case t.ix.isScript(e):return n.sendExecuteScript?n.sendExecuteScript(e,t,n):lt(e,t,n);case t.ix.isGetAccount(e):return n.sendGetAccount?n.sendGetAccount(e,t,n):ht(e,t,n);case t.ix.isGetEvents(e):return n.sendGetEvents?n.sendGetEvents(e,t,n):vt(e,t,n);case t.ix.isGetBlock(e):return n.sendGetBlock?n.sendGetBlock(e,t,n):wt(e,t,n);case t.ix.isGetBlockHeader(e):return n.sendGetBlockHeader?n.sendGetBlockHeader(e,t,n):yt(e,t,n);case t.ix.isGetCollection(e):return n.sendGetCollection?n.sendGetCollection(e,t,n):async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ge(n.node,"SDK Send Get Collection Error: opts.node must be defined."),Ge(t.response,"SDK Send Get Collection Error: context.response must be defined.");const r=n.httpRequest||ct,o=await r({hostname:n.node,path:`/v1/collections/${e.collection.id}?expand=transactions`,method:"GET",body:null}),a=t.response();return a.tag=e.tag,a.collection={id:o.id,transactionIds:o.transactions.map((e=>e.id))},a}(e,t,n);case t.ix.isPing(e):return n.sendPing?n.sendPing(e,t,n):async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ge(n.node,"SDK Send Ping Error: opts.node must be defined."),Ge(t.response,"SDK Send Ping Error: context.response must be defined.");const r=n.httpRequest||ct;await r({hostname:n.node,path:"/v1/blocks?height=sealed",method:"GET",body:null});let o=t.response();return o.tag=e.tag,o}(e,t,n);case t.ix.isGetNetworkParameters(e):return n.sendGetNetworkParameters?n.sendGetNetworkParameters(e,t,n):async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ge(n.node,"SDK Send Get Network Parameters Error: opts.node must be defined."),Ge(t.response,"SDK Send Get Network Parameters Error: context.response must be defined.");const r=n.httpRequest||ct;e=await e;const o=await r({hostname:n.node,path:"/v1/network/parameters",method:"GET",body:null});let a=t.response();return a.tag=e.tag,a.networkParameters={chainId:o.chain_id},a}(e,t,n);default:return e}};var kt={},At={},Rt={},Tt={},Ct=function(e,t){return function(n,r){var o=2*r,a=2*t;n[o]=e[a],n[o+1]=e[a+1]}};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t,n=(t=Ct)&&t.__esModule?t:{default:t};var r=function(e){for(var t=e.A,r=e.C,o=0;o<25;o+=5){for(var a=0;a<5;a++)(0,n.default)(t,o+a)(r,a);for(var s=0;s<5;s++){var i=2*(o+s),c=(s+1)%5*2,u=(s+2)%5*2;t[i]^=~r[c]&r[u],t[i+1]^=~r[c+1]&r[u+1]}}};e.default=r}(Tt);var _t={},xt={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=new Uint32Array([0,1,0,32898,2147483648,32906,2147483648,2147516416,0,32907,0,2147483649,2147483648,2147516545,2147483648,32777,0,138,0,136,0,2147516425,0,2147483658,0,2147516555,2147483648,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,0,32778,2147483648,2147483658,2147483648,2147516545,2147483648,32896,0,2147483649,2147483648,2147516424]);e.default=t}(xt),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t,n=(t=xt)&&t.__esModule?t:{default:t};var r=function(e){var t=e.A,r=2*e.roundIndex;t[0]^=n.default[r],t[1]^=n.default[r+1]};e.default=r}(_t);var Ot={},Pt={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=[10,7,11,17,18,3,5,16,8,21,24,4,15,23,19,13,12,2,20,14,22,9,6,1];e.default=t}(Pt);var Nt={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=[1,3,6,10,15,21,28,36,45,55,2,14,27,41,56,8,25,43,62,18,39,61,20,44];e.default=t}(Nt),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=o(Pt),n=o(Nt),r=o(Ct);function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){var o=e.A,a=e.C,s=e.W;(0,r.default)(o,1)(s,0);for(var i=0,c=0,u=0,l=32,d=0;d<24;d++){var f=t.default[d],p=n.default[d];(0,r.default)(o,f)(a,0),i=s[0],c=s[1],l=32-p,s[u=p<32?0:1]=i<<p|c>>>l,s[(u+1)%2]=c<<p|i>>>l,(0,r.default)(s,0)(o,f),(0,r.default)(a,0)(s,0)}};e.default=a}(Ot);var Bt={};function Ut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!e.length&&!t.length)return n;if(!e.length)return n;if(!t.length)return[...n,e[0]];const[r,...o]=e,[a,...s]=t;return void 0!==r&&n.push(r),void 0!==a&&n.push(a),Ut(o,s,n)}function Lt(e){return function(t){return"function"==typeof t?(je.deprecate({pkg:"FCL/SDK",subject:"Interopolation of functions into template literals",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params"}),Lt(e)(t(e))):String(t)}}function Ft(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"string"==typeof e?()=>e:Array.isArray(e)?t=>Ut(e,n.map(Lt(t))).join("").trim():e}!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t,n=(t=Ct)&&t.__esModule?t:{default:t};var r=function(e){for(var t=e.A,r=e.C,o=e.D,a=e.W,s=0,i=0,c=0;c<5;c++){var u=2*c,l=2*(c+5),d=2*(c+10),f=2*(c+15),p=2*(c+20);r[u]=t[u]^t[l]^t[d]^t[f]^t[p],r[u+1]=t[u+1]^t[l+1]^t[d+1]^t[f+1]^t[p+1]}for(var h=0;h<5;h++){(0,n.default)(r,(h+1)%5)(a,0),s=a[0],i=a[1],a[0]=s<<1|i>>>31,a[1]=i<<1|s>>>31,o[2*h]=r[(h+4)%5*2]^a[0],o[2*h+1]=r[(h+4)%5*2+1]^a[1];for(var g=0;g<25;g+=5)t[2*(g+h)]^=o[2*h],t[2*(g+h)+1]^=o[2*h+1]}};e.default=r}(Bt),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=a(Tt),n=a(_t),r=a(Ot),o=a(Bt);function a(e){return e&&e.__esModule?e:{default:e}}var s=function(){var e=new Uint32Array(10),a=new Uint32Array(10),s=new Uint32Array(2);return function(i){for(var c=0;c<24;c++)(0,o.default)({A:i,C:e,D:a,W:s}),(0,r.default)({A:i,C:e,W:s}),(0,t.default)({A:i,C:e}),(0,n.default)({A:i,roundIndex:c});e.fill(0),a.fill(0),s.fill(0)}};e.default=s}(Rt),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t,n=$e,r=(t=Rt)&&t.__esModule?t:{default:t};var o=function(e,t){for(var n=0;n<e.length;n+=8){var r=n/4;t[r]^=e[n+7]<<24|e[n+6]<<16|e[n+5]<<8|e[n+4],t[r+1]^=e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]}return t},a=function(e,t){for(var n=0;n<t.length;n+=8){var r=n/4;t[n]=e[r+1],t[n+1]=e[r+1]>>>8,t[n+2]=e[r+1]>>>16,t[n+3]=e[r+1]>>>24,t[n+4]=e[r],t[n+5]=e[r]>>>8,t[n+6]=e[r]>>>16,t[n+7]=e[r]>>>24}return t},s=function(e){var t=this,s=e.capacity,i=e.padding,c=(0,r.default)(),u=s/8,l=200-s/4,d=0,f=new Uint32Array(50),p=n.Buffer.allocUnsafe(l);return this.absorb=function(e){for(var n=0;n<e.length;n++)p[d]=e[n],(d+=1)>=l&&(o(p,f),c(f),d=0);return t},this.squeeze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={buffer:e.buffer||n.Buffer.allocUnsafe(u),padding:e.padding||i,queue:n.Buffer.allocUnsafe(p.length),state:new Uint32Array(f.length)};p.copy(t.queue);for(var r=0;r<f.length;r++)t.state[r]=f[r];t.queue.fill(0,d),t.queue[d]|=t.padding,t.queue[l-1]|=128,o(t.queue,t.state);for(var s=0;s<t.buffer.length;s+=l)c(t.state),a(t.state,t.buffer.slice(s,s+l));return t.buffer},this.reset=function(){return p.fill(0),f.fill(0),d=0,t},this};e.default=s}(At),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.SHAKE=e.SHA3Hash=e.SHA3=e.Keccak=void 0;var t,n=$e,r=(t=At)&&t.__esModule?t:{default:t};var o=function(e){var t=e.allowedSizes,o=e.defaultSize,a=e.padding;return function e(){var s=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;if(!this||this.constructor!==e)return new e(i);if(t&&!t.includes(i))throw new Error("Unsupported hash length");var c=new r.default({capacity:i});return this.update=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";if(n.Buffer.isBuffer(e))return c.absorb(e),s;if("string"==typeof e)return s.update(n.Buffer.from(e,t));throw new TypeError("Not a string or buffer")},this.digest=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"binary",t="string"==typeof e?{format:e}:e,n=c.squeeze({buffer:t.buffer,padding:t.padding||a});return t.format&&"binary"!==t.format?n.toString(t.format):n},this.reset=function(){return c.reset(),s},this}},a=o({allowedSizes:[224,256,384,512],defaultSize:512,padding:1});e.Keccak=a;var s=o({allowedSizes:[224,256,384,512],defaultSize:512,padding:6});e.SHA3=s;var i=o({allowedSizes:[128,256],defaultSize:256,padding:31});e.SHAKE=i;var c=a;e.SHA3Hash=c,s.SHA3Hash=c;var u=s;e.default=u}(kt);const Dt="UNKNOWN",jt="SCRIPT",Gt="TRANSACTION",$t="GET_TRANSACTION_STATUS",Mt="GET_ACCOUNT",zt="GET_EVENTS",qt="PING",Yt="GET_TRANSACTION",Ht="GET_BLOCK",Kt="GET_BLOCK_HEADER",Wt="GET_COLLECTION",Vt="GET_NETWORK_PARAMETERS",Jt="BAD",Xt="OK",Zt="ACCOUNT",Qt="PARAM",en="ARGUMENT",tn="authorizer",nn="payer",rn="proposer",on=`{\n  "kind":"${Zt}",\n  "tempId":null,\n  "addr":null,\n  "keyId":null,\n  "sequenceNum":null,\n  "signature":null,\n  "signingFunction":null,\n  "resolve":null,\n  "role": {\n    "proposer":false,\n    "authorizer":false,\n    "payer":false,\n    "param":false\n  }\n}`,an=`{\n  "kind":"${en}",\n  "tempId":null,\n  "value":null,\n  "asArgument":null,\n  "xform":null,\n  "resolve": null,\n  "resolveArgument": null\n}`,sn=`{\n  "tag":"${Dt}",\n  "assigns":{},\n  "status":"${Xt}",\n  "reason":null,\n  "accounts":{},\n  "params":{},\n  "arguments":{},\n  "message": {\n    "cadence":null,\n    "refBlock":null,\n    "computeLimit":null,\n    "proposer":null,\n    "payer":null,\n    "authorizations":[],\n    "params":[],\n    "arguments":[]\n  },\n  "proposer":null,\n  "authorizations":[],\n  "payer":[],\n  "events": {\n    "eventType":null,\n    "start":null,\n    "end":null,\n    "blockIds":[]\n  },\n  "transaction": {\n    "id":null\n  },\n  "block": {\n    "id":null,\n    "height":null,\n    "isSealed":null\n  },\n  "account": {\n    "addr":null\n  },\n  "collection": {\n    "id":null\n  }\n}`,cn=new Set(Object.keys(JSON.parse(sn))),un=()=>JSON.parse(sn),ln="abcdefghijklmnopqrstuvwxyz0123456789".split(""),dn=()=>ln[~~(Math.random()*ln.length)],fn=()=>Array.from({length:10},dn).join(""),pn=e=>"number"==typeof e,hn=e=>Array.isArray(e),gn=e=>null!==e&&"object"==typeof e,yn=e=>null==e,mn=e=>"function"==typeof e,wn=e=>{if(!gn(e)||yn(e)||pn(e))return!1;for(let t of cn)if(!e.hasOwnProperty(t))return!1;return!0},bn=e=>(e.status=Xt,e),vn=(e,t)=>(e.status=Jt,e.reason=t,e),En=e=>t=>(t.tag=e,bn(t)),In=e=>null==e.keyId?e:(Ge(!isNaN(parseInt(e.keyId)),"account.keyId must be an integer"),{...e,keyId:parseInt(e.keyId)}),Sn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{Ge("function"==typeof e||"object"==typeof e,"prepAccount must be passed an authorization function or an account object"),Ge(null!=t.role,"Account must have a role");const r=JSON.parse(on),o=t.role,a=fn();e.authorization&&mn(e.authorization)&&(e={resolve:e.authorization}),!e.authorization&&mn(e)&&(e={resolve:e});const s=e.resolve;return s&&(e.resolve=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return[s,In].reduce((async(e,t)=>t(await e,...n)),e)}),e=In(e),n.accounts[a]={...r,tempId:a,...e,role:{...r.role,..."object"==typeof e.role?e.role:{},[o]:!0}},o===tn?n.authorizations.push(a):o===nn?n.payer.push(a):n[o]=a,n}},kn=e=>t=>{let n=fn();return t.message.arguments.push(n),t.arguments[n]=JSON.parse(an),t.arguments[n].tempId=n,t.arguments[n].value=e.value,t.arguments[n].asArgument=e.asArgument,t.arguments[n].xform=e.xform,t.arguments[n].resolve=e.resolve,t.arguments[n].resolveArgument=mn(e.resolveArgument)?e.resolveArgument.bind(e):e.resolveArgument,bn(t)},An=En(Dt),Rn=En(jt),Tn=En(Gt),Cn=En($t),_n=En(Yt),xn=En(Mt),On=En(zt),Pn=En(qt),Nn=En(Ht),Bn=En(Kt),Un=En(Wt),Ln=En(Vt),Fn=e=>t=>t.tag===e,Dn=Fn(Dt),jn=Fn(jt),Gn=Fn(Gt),$n=Fn($t),Mn=Fn(Yt),zn=Fn(Mt),qn=Fn(zt),Yn=Fn(qt),Hn=Fn(Ht),Kn=Fn(Kt),Wn=Fn(Wt),Vn=Fn(Vt),Jn=e=>e.status===Xt,Xn=e=>e.status===Jt,Zn=e=>e.reason,Qn=e=>{for(let t of Object.keys(e))if(!cn.has(t))throw new Error(`"${t}" is an invalid root level Interaction property.`);return e},er=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{if(e=Qn(await e),Xn(e))throw new Error(`Interaction Error: ${e.reason}`);if(!t.length)return e;const[n,...r]=t,o=await n;if(mn(o))return er(o(e),r);if(yn(o)||!o)return er(e,r);if(wn(o))return er(o,r);throw new Error("Invalid Interaction Composition")}catch(e){throw e}},tr=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[r,o]=t;return hn(r)&&null==o?e=>tr(e,r):er(r,o)},nr=e=>e,rr=(e,t,n)=>null==e.assigns[t]?n:e.assigns[t],or=(e,t)=>n=>(n.assigns[e]=t,bn(n)),ar=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nr;return n=>(n.assigns[e]=t(n.assigns[e],n),bn(n))};var sr=Object.freeze({__proto__:null,UNKNOWN:Dt,SCRIPT:jt,TRANSACTION:Gt,GET_TRANSACTION_STATUS:$t,GET_ACCOUNT:Mt,GET_EVENTS:zt,PING:qt,GET_TRANSACTION:Yt,GET_BLOCK:Ht,GET_BLOCK_HEADER:Kt,GET_COLLECTION:Wt,GET_NETWORK_PARAMETERS:Vt,BAD:Jt,OK:Xt,ACCOUNT:Zt,PARAM:Qt,ARGUMENT:en,AUTHORIZER:tn,PAYER:nn,PROPOSER:rn,interaction:un,uuid:fn,isNumber:pn,isArray:hn,isObj:gn,isNull:yn,isFn:mn,isInteraction:wn,Ok:bn,Bad:vn,prepAccount:Sn,makeArgument:kn,makeUnknown:An,makeScript:Rn,makeTransaction:Tn,makeGetTransactionStatus:Cn,makeGetTransaction:_n,makeGetAccount:xn,makeGetEvents:On,makePing:Pn,makeGetBlock:Nn,makeGetBlockHeader:Bn,makeGetCollection:Un,makeGetNetworkParameters:Ln,isUnknown:Dn,isScript:jn,isTransaction:Gn,isGetTransactionStatus:$n,isGetTransaction:Mn,isGetAccount:zn,isGetEvents:qn,isPing:Yn,isGetBlock:Hn,isGetBlockHeader:Kn,isGetCollection:Wn,isGetNetworkParameters:Vn,isOk:Jn,isBad:Xn,why:Zn,isAccount:e=>e.kind===Zt,isParam:e=>e.kind===Qt,isArgument:e=>e.kind===en,pipe:tr,get:rr,put:or,update:ar,destroy:e=>t=>(delete t.assigns[e],bn(t))});function ir(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return tr(un(),e)}const cr=()=>JSON.parse('{\n    "tag":null,\n    "transaction":null,\n    "transactionStatus":null,\n    "transactionId":null,\n    "encodedData":null,\n    "events":null,\n    "account":null,\n    "block":null,\n    "blockHeader":null,\n    "latestBlock":null,\n    "collection":null,\n    "networkParameters":null\n}');function ur(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return tr([Nn,t=>(t.block.isSealed=e,bn(t))])}function lr(e){return tr([xn,t=>(t.account.addr=ot(e),bn(t))])}const dr=()=>{je.deprecate({pkg:"@onflow/decode",subject:"Operating upon data of the latestBlock field of the response object",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/decode/WARNINGS.md#0001-Deprecating-latestBlock-field"})},fr=async e=>e,pr=async(e,t,n)=>{const r=await e.fields.reduce((async(e,r)=>((e=await e)[r.name]=await yr(r.value,t,[...n,r.name]),e)),Promise.resolve({})),o=e.id&&gr(t,e.id);return o?await o(r):r},hr={UInt:fr,Int:fr,UInt8:fr,Int8:fr,UInt16:fr,Int16:fr,UInt32:fr,Int32:fr,UInt64:fr,Int64:fr,UInt128:fr,Int128:fr,UInt256:fr,Int256:fr,Word8:fr,Word16:fr,Word32:fr,Word64:fr,UFix64:fr,Fix64:fr,String:fr,Character:fr,Bool:fr,Address:fr,Void:async()=>null,Optional:async(e,t,n)=>e?await yr(e,t,n):null,Reference:async e=>({address:e.address,type:e.type}),Array:async(e,t,n)=>await Promise.all(e.map((e=>new Promise((async r=>r(await yr(e,t,[...n,e.type]))))))),Dictionary:async(e,t,n)=>await e.reduce((async(e,r)=>((e=await e)[await yr(r.key,t,[...n,r.key])]=await yr(r.value,t,[...n,r.key]),e)),Promise.resolve({})),Event:pr,Resource:pr,Struct:pr,Enum:pr,Type:async e=>e.staticType,Path:async e=>({domain:e.domain,identifier:e.identifier}),Capability:async e=>({path:e.path,address:e.address,borrowType:e.borrowType})},gr=(e,t)=>{const n=Object.keys(e).find((e=>{if(/^\/.*\/$/.test(e)){return new RegExp(e.substring(1,e.length-1)).test(t)}return e===t}));return t&&n&&e[n]},yr=async(e,t,n)=>{let r=gr(t,e.type);if(!r)throw new Error(`Undefined Decoder Error: ${e.type}@${n.join(".")}`);return await r(e.value,t,n)},mr=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const r=Object.keys(hr).filter((e=>!Object.keys(t).find((t=>new RegExp(t).test(e))))).reduce(((e,t)=>(e[t]=hr[t],e)),t),o={...r,...t};return yr(e,o,n)},wr=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.encodedData)return mr(e.encodedData,t);if(e.transactionStatus)return{...e.transactionStatus,events:await Promise.all(e.transactionStatus.events.map((async function(e){return{type:e.type,transactionId:e.transactionId,transactionIndex:e.transactionIndex,eventIndex:e.eventIndex,data:await mr(e.payload,t)}})))};if(e.transaction)return e.transaction;if(e.events)return await Promise.all(e.events.map((async function(e){return{blockId:e.blockId,blockHeight:e.blockHeight,blockTimestamp:e.blockTimestamp,type:e.type,transactionId:e.transactionId,transactionIndex:e.transactionIndex,eventIndex:e.eventIndex,data:await mr(e.payload,t)}})));if(e.account)return e.account;if(e.block)return e.block;if(e.blockHeader)return e.blockHeader;if(e.latestBlock)return dr(),e.latestBlock;if(e.transactionId)return e.transactionId;if(e.collection)return e.collection;if(e.networkParameters){return{chainId:{"flow-testnet":"testnet","flow-mainnet":"mainnet","flow-emulator":"local"}[e.networkParameters.chainId]}}return null},br=e=>"function"==typeof e,vr=e=>"string"==typeof e,Er=()=>/\b(0x\w+)\b/g;function Ir(e){return Er().test(e)}const Sr=()=>/import\s+"(\w+)"/g;function kr(e){return Sr().test(e)}const Ar=e=>"function"==typeof e;function Rr(e){return Ge(null!=typeof e.xform,`No type specified for argument: ${e.value}`),Ar(e.xform)?e.xform(e.value):Ar(e.xform.asArgument)?e.xform.asArgument(e.value):void Ge(!1,"Invalid Argument",e)}async function Tr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(Ge(t>0,`Argument Resolve Recursion Limit Exceeded for Arg: ${e.tempId}`),Ar(e.resolveArgument)){return Tr(await e.resolveArgument(),t-1)}return e}const Cr=e=>Br(Gr(Mr(e))),_r=e=>Br(Gr(zr(e))),xr=(e,t)=>$e.Buffer.from(e.padStart(2*t,0),"hex"),Or=(Pr=$e.Buffer.from("FLOW-V0.0-transaction").toString("hex"),Nr=32,$e.Buffer.from(Pr.padEnd(2*Nr,0),"hex")).toString("hex");var Pr,Nr;const Br=e=>Or+e,Ur=e=>xr(e,8),Lr=e=>xr(e,32),Fr=e=>$e.Buffer.from(JSON.stringify(e),"utf8"),Dr=e=>$e.Buffer.from(e,"utf8"),jr=e=>$e.Buffer.from(e,"hex"),Gr=e=>Ze(e).toString("hex"),$r=e=>{const t=new kt.SHA3(256);return t.update($e.Buffer.from(e,"hex")),t.digest().toString("hex")},Mr=e=>(Kr(e),[Dr(e.cadence),e.arguments.map(Fr),Lr(e.refBlock),e.computeLimit,Ur(ot(e.proposalKey.address)),e.proposalKey.keyId,e.proposalKey.sequenceNum,Ur(ot(e.payer)),e.authorizers.map((e=>Ur(ot(e))))]),zr=e=>(Wr(e),[Mr(e),qr(e)]),qr=e=>{const t=Yr(e);return e.payloadSigs.map((e=>({signerIndex:t.get(e.address),keyId:e.keyId,sig:e.sig}))).sort(((e,t)=>e.signerIndex>t.signerIndex?1:e.signerIndex<t.signerIndex?-1:e.keyId>t.keyId?1:e.keyId<t.keyId?-1:void 0)).map((e=>[e.signerIndex,e.keyId,jr(e.sig)]))},Yr=e=>{const t=new Map;let n=0;const r=e=>{t.has(e)||(t.set(e,n),n++)};return r(e.proposalKey.address),r(e.payer),e.authorizers.forEach(r),t},Hr=e=>{Vr(e);const t=Yr(e),n=e=>e.map((e=>{let{address:n,keyId:r,sig:o}=e;return{signerIndex:t.get(n),keyId:r,sig:o}})).sort(((e,t)=>e.signerIndex>t.signerIndex?1:e.signerIndex<t.signerIndex?-1:e.keyId>t.keyId?1:e.keyId<t.keyId?-1:void 0)).map((e=>[e.signerIndex,e.keyId,jr(e.sig)]));return[[Dr(e.cadence),e.arguments.map(Fr),Lr(e.refBlock),e.computeLimit,Ur(ot(e.proposalKey.address)),e.proposalKey.keyId,e.proposalKey.sequenceNum,Ur(ot(e.payer)),e.authorizers.map((e=>Ur(ot(e))))],n(e.payloadSigs),n(e.envelopeSigs)]},Kr=e=>{eo.forEach((t=>so(e,t))),to.forEach((t=>so(e.proposalKey,t,"proposalKey")))},Wr=e=>{no.forEach((t=>so(e,t))),e.payloadSigs.forEach(((e,t)=>{ro.forEach((n=>so(e,n,"payloadSigs",t)))}))},Vr=e=>{eo.forEach((t=>so(e,t))),to.forEach((t=>so(e.proposalKey,t,"proposalKey"))),no.forEach((t=>so(e,t))),e.payloadSigs.forEach(((e,t)=>{ro.forEach((n=>so(e,n,"payloadSigs",t)))})),oo.forEach((t=>so(e,t))),e.envelopeSigs.forEach(((e,t)=>{ao.forEach((n=>so(e,n,"envelopeSigs",t)))}))},Jr=e=>"number"==typeof e,Xr=e=>"string"==typeof e,Zr=e=>null!==e&&"object"==typeof e,Qr=e=>Zr(e)&&e instanceof Array,eo=[{name:"cadence",check:Xr},{name:"arguments",check:Qr},{name:"refBlock",check:Xr,defaultVal:"0"},{name:"computeLimit",check:Jr},{name:"proposalKey",check:Zr},{name:"payer",check:Xr},{name:"authorizers",check:Qr}],to=[{name:"address",check:Xr},{name:"keyId",check:Jr},{name:"sequenceNum",check:Jr}],no=[{name:"payloadSigs",check:Qr}],ro=[{name:"address",check:Xr},{name:"keyId",check:Jr},{name:"sig",check:Xr}],oo=[{name:"envelopeSigs",check:Qr}],ao=[{name:"address",check:Xr},{name:"keyId",check:Jr},{name:"sig",check:Xr}],so=(e,t,n,r)=>{const{name:o,check:a,defaultVal:s}=t;if(null==e[o]&&null!=s&&(e[o]=s),null==e[o])throw co(o,n,r);if(!a(e[o]))throw uo(o,n,r)},io=(e,t,n)=>t?null==n?`${t}.${e}`:`${t}.${n}.${e}`:e,co=(e,t,n)=>new Error(`Missing field ${io(e,t,n)}`),uo=(e,t,n)=>new Error(`Invalid field ${io(e,t,n)}`);function lo(e){let t=new Set(e.authorizations);return t.add(e.proposer),Array.isArray(e.payer)?e.payer.forEach((e=>t.delete(e))):t.delete(e.payer),Array.from(t)}function fo(e){let t=new Set(Array.isArray(e.payer)?e.payer:[e.payer]);return Array.from(t)}const po=e=>({cadence:e.message.cadence,refBlock:e.message.refBlock||null,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map((t=>e.arguments[t].asArgument)),proposalKey:{address:at(e.accounts[e.proposer].addr),keyId:e.accounts[e.proposer].keyId,sequenceNum:e.accounts[e.proposer].sequenceNum},payer:at(e.accounts[Array.isArray(e.payer)?e.payer[0]:e.payer].addr),authorizers:(()=>{const t=e.authorizations.map((t=>at(e.accounts[t].addr))).reduce(((e,t)=>e.find((e=>e===t))?e:[...e,t]),[]);return t[0]?t:[]})(),payloadSigs:lo(e).map((t=>({address:at(e.accounts[t].addr),keyId:e.accounts[t].keyId,sig:e.accounts[t].signature}))),envelopeSigs:fo(e).map((t=>({address:at(e.accounts[t].addr),keyId:e.accounts[t].keyId,sig:e.accounts[t].signature})))}),ho=e=>`${at(e.addr)}-${e.keyId}`,go=e=>"function"==typeof e;function yo(e,t){try{return{f_type:"PreSignable",f_vsn:"1.0.1",roles:e.role,cadence:t.message.cadence,args:t.message.arguments.map((e=>t.arguments[e].asArgument)),data:{},interaction:t,voucher:po(t)}}catch(e){throw console.error("buildPreSignable",e),e}}async function mo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3;Ge(r,"Account Resolve Recursion Limit Exceeded",{ix:e,accounts:t});let o=[];for(let s of t){let t=s.resolve;s.resolve=null;var a=n||s;if(go(t)&&(s=await t(s,yo(s,e))),Array.isArray(s))await mo(e,s,a,r-1);else{if(s.addr&&(s.addr=ot(s.addr)),null!=s.addr&&null!=s.keyId&&(s.tempId=ho(s)),e.accounts[s.tempId]=e.accounts[s.tempId]||s,e.accounts[s.tempId].role.proposer=e.accounts[s.tempId].role.proposer||s.role.proposer,e.accounts[s.tempId].role.payer=e.accounts[s.tempId].role.payer||s.role.payer,e.accounts[s.tempId].role.authorizer=e.accounts[s.tempId].role.authorizer||s.role.authorizer,e.accounts[s.tempId].role.proposer&&e.proposer===a.tempId&&(e.proposer=s.tempId),e.accounts[s.tempId].role.payer&&(Array.isArray(e.payer)?e.payer=Array.from(new Set([...e.payer,s.tempId].map((e=>e===a.tempId?s.tempId:e)))):e.payer=Array.from(new Set([e.payer,s.tempId].map((e=>e===a.tempId?s.tempId:e)))),e.payer.length>1)){const t=[],n=[];e.payer=e.payer.reduce(((r,o)=>{const{addr:a}=e.accounts[o],s=ho(e.accounts[o]);return n.push(a),t.includes(s)?r:(t.push(s),[...r,o])}),[]);if(Array.from(new Set(n)).length>1)throw new Error("Payer can not be different accounts")}e.accounts[s.tempId].role.authorizer&&(n?o=Array.from(new Set([...o,s.tempId])):e.authorizations=e.authorizations.map((e=>e===a.tempId?s.tempId:e)))}a.tempId!=s.tempId&&delete e.accounts[a.tempId]}n&&(e.authorizations=e.authorizations.map((e=>e===n.tempId?o:e)).reduce(((e,t)=>Array.isArray(t)?[...e,...t]:[...e,t]),[]))}function wo(e,t){return async function(n){const r=e.accounts[n];if(null!=r.signature)return;const{signature:o}=await r.signingFunction(function(e,t,n){try{return{f_type:"Signable",f_vsn:"1.0.1",message:t,addr:ot(e.addr),keyId:e.keyId,roles:e.role,cadence:n.message.cadence,args:n.message.arguments.map((e=>n.arguments[e].asArgument)),data:{},interaction:n,voucher:po(n)}}catch(e){throw console.error("buildSignable",e),e}}(r,t,e));e.accounts[n].signature=o}}function bo(e){const t=ot((Array.isArray(e.payer)?e.accounts[e.payer[0]]:e.accounts[e.payer]).addr);return{cadence:e.message.cadence,refBlock:e.message.refBlock||null,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map((t=>e.arguments[t].asArgument)),proposalKey:{address:ot(e.accounts[e.proposer].addr),keyId:e.accounts[e.proposer].keyId,sequenceNum:e.accounts[e.proposer].sequenceNum},payer:t,authorizers:e.authorizations.map((t=>ot(e.accounts[t].addr))).reduce(((e,t)=>e.find((e=>e===t))?e:[...e,t]),[])}}const vo=100;const Eo=e=>e,Io=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Eo;return async n=>(await Ue.get(`debug.${e}`)&&await t(n,(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];console.log(`debug[${e}] ---\n`,...n,"\n\n\n---")}),(e=>["\nAccounts:",{proposer:e.proposer,authorizations:e.authorizations,payer:e.payer},"\n\nDetails:",e.accounts].filter(Boolean))),n)},So=tr([async function(e){if(!Gn(e)&&!jn(e))return e;var t=rr(e,"ix.cadence");if(Ge(br(t)||vr(t),"Cadence needs to be a function or a string."),br(t)&&(t=await t({})),Ge(vr(t),"Cadence needs to be a string at this point."),Ge(!Ir(t)||!kr(t),"Both account identifier and contract identifier syntax not simultaneously supported."),Ir(t)&&(t=await Ue().where(/^0x/).then((e=>Object.entries(e).reduce(((e,t)=>{let[n,r]=t;const o=new RegExp("(\\b"+n+"\\b)","g");return e.replace(o,r)}),t)))),kr(t))for(const[e,n]of function(e){return e.matchAll(Sr())}(t)){const r=await Ue().get(`system.contracts.${n}`);r?t=t.replace(e,`import ${n} from ${at(r)}`):je({title:"Contract Placeholder not found",message:`Cannot find a value for contract placeholder ${n}. Please add to your flow.json or explicitly add it to the config 'contracts.*' namespace.`,level:De.warn})}return e.message.cadence=t,e},Io("cadence",((e,t)=>t(e.message.cadence))),async function(e){return Gn(e)&&(e.message.computeLimit=e.message.computeLimit||await Ue.get("fcl.limit"),e.message.computeLimit||(je.deprecate({pkg:"FCL/SDK",subject:"The built-in default compute limit (DEFAULT_COMPUTE_LIMIT=10)",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0009-deprecate-default-compute-limit"}),e.message.computeLimit=vo)),e},Io("compute limit",((e,t)=>t(e.message.computeLimit))),async function(e){if(Gn(e)||jn(e))for(let[t,n]of Object.entries(e.arguments)){const r=await Tr(n);e.arguments[t].asArgument=Rr(r)}return e},Io("arguments",((e,t)=>t(e.message.arguments,e.message))),async function(e){if(Gn(e)){Array.isArray(e.payer)||je.deprecate({pkg:"FCL",subject:'"ix.payer" must be an array. Support for ix.payer as a singular',message:"See changelog for more info."});try{await mo(e,Object.values(e.accounts)),await mo(e,Object.values(e.accounts))}catch(e){throw console.error("=== SAD PANDA ===\n\n",e,"\n\n=== SAD PANDA ==="),e}}return e},Io("accounts",((e,t,n)=>t(...n(e)))),async function(e){if(Gn(e)&&null==e.message.refBlock){const t=await Ue().get("accessNode.api"),n=await Ue.first(["sdk.transport","sdk.send"],St);Ge(n,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21"),e.message.refBlock=(await n(ir([ur()]),{config:Ue,response:cr,Buffer:$e.Buffer,ix:sr},{node:t}).then(wr)).id}return e},async function(e){if(Gn(e)){var t=Object.values(e.accounts).find((e=>e.role.proposer));if(Ge(t,"Transactions require a proposer"),null==t.sequenceNum){const n=await Ue().get("accessNode.api"),r=await Ue.first(["sdk.transport","sdk.send"],St);Ge(r,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21"),e.accounts[t.tempId].sequenceNum=await r(await ir([lr(t.addr)]),{config:Ue,response:cr,Buffer:$e.Buffer,ix:sr},{node:n}).then(wr).then((e=>e.keys)).then((e=>e.find((e=>e.index===t.keyId)))).then((e=>e.sequenceNumber))}}return e},async function(e){if(Gn(e))try{let t=lo(e);const n=Cr(bo(e));await Promise.all(t.map(wo(e,n)));let r=fo(e);const o=_r({...bo(e),payloadSigs:t.map((t=>({address:e.accounts[t].addr,keyId:e.accounts[t].keyId,sig:e.accounts[t].signature})))});await Promise.all(r.map(wo(e,o)))}catch(t){throw console.error("Signatures",t,{ix:e}),t}return e},Io("signatures",((e,t,n)=>t(...n(e)))),async function(e){for(let t of Object.keys(e.accounts))e.accounts[t].addr=ot(e.accounts[t].addr);return e},async function(e){const t=rr(e,"ix.validators",[]);return tr(e,t.map((e=>t=>e(t,{Ok:bn,Bad:vn}))))},async function(e){const t=rr(e,"ix.voucher-intercept");return mn(t)&&await t(po(e)),e},Io("resolved",((e,t)=>t(e)))]);function ko(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){const[e,n]=t;return ko(((t,r)=>{let{Ok:o,Bad:a}=r;return e?o(t):a(t,n)}))}const[r]=t;return e=>r(e,{Ok:bn,Bad:vn})}const Ao=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await Ue.first(["sdk.transport","sdk.send"],t.send||St);ko(n,"Required value for sdk.transport is not defined in config. See: https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21");const r=await Ue.first(["sdk.resolve"],t.resolve||So);return t.node=t.node||await Ue().get("accessNode.api"),Array.isArray(e)&&(e=tr(un(),e)),n(await r(e),{config:Ue,response:cr,ix:sr,Buffer:$e.Buffer},t)};async function Ro(e){const t=await Ue().where(/^decoder\./),n=Object.entries(t).map((e=>{let[t,n]=e;return t=`/${t.replace(/^decoder\./,"")}$/`,[t,n]}));return wr(e,Object.fromEntries(n))}class To extends Error{constructor(e){super(`\n        Encode Message From Signable Error: Unable to determine message encoding for signer addresss: ${e}. \n        Please ensure the address: ${e} is intended to sign the given transaction as specified by the transaction signable.\n      `.trim()),this.name="Unable To Determine Message Encoding For Signer Addresss"}}function Co(e){return ar("ix.validators",(t=>Array.isArray(t)?t.push(e):[e]))}function _o(e){return tr([t=>(t.block.height=e,t),Co((e=>{if("boolean"==typeof e.block.isSealed)throw new Error("Unable to specify both block height and isSealed.");if(e.block.id)throw new Error("Unable to specify both block height and block id.");return e}))])}function xo(e){return tr([t=>(t.block.id=e,bn(t)),Co(((e,t)=>{let{Ok:n,Bad:r}=t;return zn(e)?r(e,"Unable to specify a block id with a Get Account interaction."):"boolean"==typeof e.block.isSealed?r(e,"Unable to specify both block id and isSealed."):e.block.height?r(e,"Unable to specify both block id and block height."):n(e)}))])}function Oo(){let{sealed:e=!1,id:t,height:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ge(!(e&&t||e&&n),'Method: block -- Cannot pass "sealed" with "id" or "height"'),Ge(!(t&&n),'Method: block -- Cannot pass "id" and "height" simultaneously'),t?Ao([ur(),xo(t)],r).then(wr):n?Ao([ur(),_o(n)],r).then(wr):Ao([ur(e)],r).then(wr)}function Po(){return tr((arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>Sn(e,{role:tn}))))}function No(e,t,n){return tr([On,r=>(r.events.eventType=e,r.events.start=t,r.events.end=n,bn(r))])}function Bo(e){return tr([Cn,t=>(t.transaction.id=e,bn(t))])}function Uo(){return tr([Ln,e=>bn(e)])}function Lo(e){return t=>(t.message.computeLimit=e,t)}function Fo(){return tr((arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(kn))}function Do(e,t){return{value:e,xform:t}}async function jo(e){return Sn(e,{role:rn})}async function Go(e){return Sn(e,{role:nn})}function $o(e){return tr([t=>(t.message.refBlock=e,bn(t))])}function Mo(){return tr([Rn,or("ix.cadence",Ft(...arguments))])}const zo=[],qo=null;function Yo(){return tr([Tn,or("ix.cadence",Ft(...arguments)),e=>(e.message.refBlock=e.message.refBlock||qo,e.authorizations=e.authorizations||zo,bn(e))])}const Ho=e=>e;function Ko(e){return["SIGNATURE",e.addr,e.keyId].join(".")}function Wo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){const n={...t,...e,signingFunction:e.signingFunction||t.signingFunction||function(e){return{addr:n.addr,keyId:n.keyId,signature:Ko(n)}}};return n}}const Vo={proposer:!1,authorizer:!1,payer:!1};var Jo=Object.freeze({__proto__:null,mockSend:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ho;return async function(t){switch(t=await t,!0){case zn(t):return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return Ge(e.account,"mockAccountResponse(ix) -- ix.account is missing",e),Ge(e.account.addr,"mockAccountResponse(ix) -- ix.account.addr is missing",e),{account:{addr:e.account.addr,keys:Array.from({length:t},((e,t)=>({index:t,sequenceNumber:42})))}}}(t);case Hn(t):return{tag:"GET_BLOCK",block:{id:"32"}};default:return e(t)}}},authzFn:Wo,authzResolve:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){const{tempId:n,...r}=e;return{...t,tempId:n||"WITH_RESOLVE",resolve:Wo(r)}}},authzResolveMany:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return{...t,tempId:e.tempId||"AUTHZ_RESOLVE_MANY",resolve:()=>[e.proposer&&Wo(e.proposer)({role:{...Vo,proposer:!0}}),...e.authorizations.map(Wo).map((e=>e({role:{...Vo,authorizer:!0}}))),e.payer&&Wo(e.payer)({role:{...Vo,payer:!0}})].filter(Boolean)}}},sig:Ko,idof:e=>`${at(e.addr)}-${e.keyId}`,run:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return ir([$o("123"),...e]).then(So)}});async function Xo(){const e=await async function(){return(await Ao([Uo()]).then(Ro)).chainId}();return Ue.put("flow.network.default",e),e}async function Zo(){let e=await Ue.get("flow.network.default");return e||(e=await Xo(),e||(e=await Ue.get("flow.network"),e?je.deprecate({pkg:"FCL",subject:'Using the "flow.network" configuration key for specifying the flow network',message:"Configuring flow.network is no longer required",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/TRANSITIONS.md#0002-deprecate-flow.network-config-key"}):(e=await Ue.get("env"),e&&je.deprecate({pkg:"FCL",subject:'Using the "env" configuration key for specifying the flow network',message:"Configuring to specify flow network is no longer required",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/TRANSITIONS.md#0001-deprecate-env-config-key"})))),Ge(e,"Error getting chainId from access node. Please configure flow.network instead"),e}function Qo(){return"undefined"!=typeof navigator&&/iPhone|iPod/.test(navigator.userAgent)||"undefined"!=typeof navigator&&/iPad/.test(navigator.userAgent)}function ea(){return"undefined"!=typeof navigator&&/android/i.test(navigator.userAgent)||Qo()}const ta={can:!("undefined"==typeof window),get:async e=>JSON.parse(sessionStorage.getItem(e)),put:async(e,t)=>sessionStorage.setItem(e,JSON.stringify(t))};async function na(e){return Object.fromEntries(Object.entries(await Ue().where(e)).map((t=>{let[n,r]=t;return[n.replace(e,""),r]})))}Ue({"discovery.wallet.method.default":"IFRAME/RPC","fcl.storage.default":ta}),Ue.subscribe(function(e){const t=e?.["accessNode.api"];this.prevAccessNode!==t&&Xo(),this.prevAccessNode=t}.bind({}));const ra="1.4.0",oa=e=>t=>typeof t===e,aa=e=>null!=e,sa=oa("object"),ia=oa("string"),ca=oa("function"),ua=oa("number");var la="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let da;var fa="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:la):e=>(da||(da=Promise.resolve())).then(e).catch((e=>setTimeout((()=>{throw e}),0)));const pa=()=>{const e=[];var t;return{async deliver(n){e.push(n),t&&(t(e.shift()),t=void 0)},receive:()=>new Promise((function(n){const r=e.shift();if(r)return n(r);t=n}))}},ha="INIT",ga="SUBSCRIBE",ya="UNSUBSCRIBE",ma="UPDATED",wa="EXIT",ba="TERMINATE",va="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||"object"==typeof window&&window.window===window&&window;va.FCL_REGISTRY=null==va.FCL_REGISTRY?{}:va.FCL_REGISTRY;var Ea=0;const Ia=5e3,Sa=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise(((o,a)=>{const s=r.expectReply||!1,i=null!=r.timeout?r.timeout:Ia;s&&i&&setTimeout((()=>a(new Error(`Timeout: ${i}ms passed without a response.`))),i);const c={to:e,from:r.from,tag:t,data:n,timeout:i,reply:o,reject:a};try{va.FCL_REGISTRY[e]&&va.FCL_REGISTRY[e].mailbox.deliver(c),s||o(!0)}catch(t){console.error("FCL.Actor -- Could Not Deliver Message",c,va.FCL_REGISTRY[e],t)}}))},ka=e=>{delete va.FCL_REGISTRY[e]},Aa=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async t=>{"function"==typeof e[ha]&&await e[ha](t);e:for(;;){const n=await t.receive();try{if(n.tag===wa){"function"==typeof e[ba]&&await e[ba](t,n,n.data||{});break e}await e[n.tag](t,n,n.data||{})}catch(e){console.error(`${t.self()} Error`,n,e)}finally{continue e}}}},Ra=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null==t&&(t=++Ea),null!=va.FCL_REGISTRY[t])return t;va.FCL_REGISTRY[t]={addr:t,mailbox:pa(),subs:new Set,kvs:{},error:null};const n={self:()=>t,receive:()=>va.FCL_REGISTRY[t].mailbox.receive(),send:function(e,n,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return o.from=t,Sa(e,n,r,o)},sendSelf:(e,n,r)=>{va.FCL_REGISTRY[t]&&Sa(t,e,n,r)},broadcast:function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r.from=t;for(let o of va.FCL_REGISTRY[t].subs)Sa(o,e,n,r)},subscribe:e=>null!=e&&va.FCL_REGISTRY[t].subs.add(e),unsubscribe:e=>null!=e&&va.FCL_REGISTRY[t].subs.delete(e),subscriberCount:()=>va.FCL_REGISTRY[t].subs.size,hasSubs:()=>!!va.FCL_REGISTRY[t].subs.size,put:(e,n)=>{null!=e&&(va.FCL_REGISTRY[t].kvs[e]=n)},get:(e,n)=>{const r=va.FCL_REGISTRY[t].kvs[e];return null==r?n:r},delete:e=>{delete va.FCL_REGISTRY[t].kvs[e]},update:(e,n)=>{null!=e&&(va.FCL_REGISTRY[t].kvs[e]=n(va.FCL_REGISTRY[t].kvs[e]))},keys:()=>Object.keys(va.FCL_REGISTRY[t].kvs),all:()=>va.FCL_REGISTRY[t].kvs,where:e=>Object.keys(va.FCL_REGISTRY[t].kvs).reduce(((n,r)=>e.test(r)?{...n,[r]:va.FCL_REGISTRY[t].kvs[r]}:n),{}),merge:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(e).forEach((n=>va.FCL_REGISTRY[t].kvs[n]=e[n]))},fatalError:e=>{va.FCL_REGISTRY[t].error=e;for(let e of va.FCL_REGISTRY[t].subs)Sa(e,ma)}};return"object"==typeof e&&(e=Aa(e)),fa((async()=>{await e(n),ka(t)})),t};function Ta(e,t){if(!e){const e=new Error(`INVARIANT ${t}`);e.stack=e.stack.split("\n").filter((e=>!/at invariant/.test(e))).join("\n");for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];throw console.error("\n\n---\n\n",e,"\n\n",...r,"\n\n---\n\n"),e}}const Ca=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.reduce(((e,t)=>t(e)),e)},_a=e=>e&&"object"==typeof e&&!Array.isArray(e),xa=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;const o=n.shift();if(_a(e)&&_a(o))for(const t in o)_a(o[t])?(e[t]||Object.assign(e,{[t]:{}}),xa(e[t],o[t])):Object.assign(e,{[t]:o[t]});return xa(e,...n)},Oa=e=>Array.isArray(e)?xa({},...e):e,Pa=e=>e.contracts?e.contracts:{},Na=(e,t)=>Ca(Oa,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.reduce(((t,n)=>({...t,...n(e)})),{})}((e=>t=>{let{deployments:n={},accounts:r={}}=t;const o=n?.[e];return o?Object.entries(o).reduce(((e,t)=>{let[n,o]=t;const a=r[n]?.address;return a?o.reduce(((e,t)=>({...e,[t]:a})),{}):e}),{}):{}})(t),Ca(Pa,(e=>t=>Object.entries(t).reduce(((t,n)=>{let[r,o]=n;const a=o?.aliases?.[e];return a&&(t[r]=a),t}),{}))(t))))(e),Ba=e=>Object.entries(e?.accounts).reduce(((e,t)=>{let[n,r]=t;return!!e||r?.hasOwnProperty("key")&&(o=r?.key,"string"==typeof o&&/^[0-9A-Fa-f]+$/.test(o));var o}),!1),Ua=e=>_a(e)?Ba(e):e.some(Ba),La=e=>"local"===e?.toLowerCase()?"emulator":e?.toLowerCase(),Fa="config",Da="PUT_CONFIG",ja="GET_CONFIG",Ga="GET_ALL_CONFIG",$a="UPDATE_CONFIG",Ma="DELETE_CONFIG",za="CLEAR_CONFIG",qa="WHERE_CONFIG",Ya="CONFIG/UPDATED",Ha=e=>e,Ka={[Da]:(e,t,n)=>{let{key:r,value:o}=n;if(null==r)throw new Error("Missing 'key' for config/put.");e.put(r,o),e.broadcast(Ya,{...e.all()})},[ja]:(e,t,n)=>{let{key:r,fallback:o}=n;if(null==r)throw new Error("Missing 'key' for config/get");t.reply(e.get(r,o))},[Ga]:(e,t)=>{t.reply({...e.all()})},[$a]:(e,t,n)=>{let{key:r,fn:o}=n;if(null==r)throw new Error("Missing 'key' for config/update");e.update(r,o||Ha),e.broadcast(Ya,{...e.all()})},[Ma]:(e,t,n)=>{let{key:r}=n;if(null==r)throw new Error("Missing 'key' for config/delete");e.delete(r),e.broadcast(Ya,{...e.all()})},[za]:(e,t)=>{let n=Object.keys(e.all());for(let t of n)e.delete(t);e.broadcast(Ya,{...e.all()})},[qa]:(e,t,n)=>{let{pattern:r}=n;if(null==r)throw new Error("Missing 'pattern' for config/where");t.reply(e.where(r))},[ga]:(e,t)=>{e.subscribe(t.from),e.send(t.from,Ya,{...e.all()})},[ya]:(e,t)=>{e.unsubscribe(t.from)}};function Wa(e,t){return Sa(Fa,Da,{key:e,value:t}),os()}function Va(e,t){return Sa(Fa,ja,{key:e,fallback:t},{expectReply:!0,timeout:10})}async function Ja(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!e.length)return t;const[n,...r]=e,o=await Va(n);return null==o?Ja(r,t):o}function Xa(){return Sa(Fa,Ga,null,{expectReply:!0,timeout:10})}function Za(e){return Sa(Fa,$a,{key:e,fn:arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ha}),os()}function Qa(e){return Sa(Fa,Ma,{key:e}),os()}function es(e){return Sa(Fa,qa,{pattern:e},{expectReply:!0,timeout:10})}function ts(e){return function(e,t,n){t(e);const r="@EXIT",o=Ra((async t=>{for(t.send(e,ga);;){const o=await t.receive(),a=va.FCL_REGISTRY[e].error;if(o.tag===r)return void t.send(e,ya);if(a)return n(null,a),void t.send(e,ya);n(o.data,null)}}));return()=>Sa(o,r)}(Fa,(()=>Ra(Ka,Fa)),e)}function ns(e){return Sa(Fa,za).then(os(e))}async function rs(e){const t=await Va("flow.network"),n=La(t),{flowJSON:r}=e;if(Ta(Boolean(r),"config.load -- 'flowJSON' must be defined"),Ta(n,'Flow Network Required -- In order for FCL to load your contracts please define "flow.network" to "emulator", "local", "testnet", or "mainnet" in your config. See more here: https://developers.flow.com/tools/fcl-js/reference/configure-fcl'),Ua(r)){const e="emulator"===n;if(cs({title:"Private Keys Detected",message:"Private keys should be stored in a separate flow.json file for security. See more here: https://developers.flow.com/tools/flow-cli/security",level:e?is.warn:is.error}),!e)return}for(const[e,t]of Object.entries(Na(r,n))){const n=`0x${e}`,r=await Va(n);r&&r!==t?cs({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:is.warn}):Wa(n,t);const o=`system.contracts.${e}`,a=await Va(o);a&&a!==t?cs({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:is.warn}):Wa(o,t)}}function os(e){return null!=e&&"object"==typeof e&&Object.keys(e).map((t=>Wa(t,e[t]))),{put:Wa,get:Va,all:Xa,first:Ja,update:Za,delete:Qa,where:es,subscribe:ts,overload:ss,load:rs}}Ra(Ka,Fa),os.put=Wa,os.get=Va,os.all=Xa,os.first=Ja,os.update=Za,os.delete=Qa,os.where=es,os.subscribe=ts,os.overload=ss,os.load=rs;const as=e=>e;function ss(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:as;return new Promise((async(n,r)=>{const o=await Xa();try{os(e);var a=await t(await Xa());await ns(o),n(a)}catch(e){await ns(o),r(e)}}))}const is=Object.freeze({debug:5,info:4,log:3,warn:2,error:1}),cs=async e=>{let{title:t,message:n,level:r,always:o=!1}=e;const a=await os.get("logger.level",is.warn);if(!o&&a<r)return;const s=(e=>{let{title:t,message:n}=e;return[`\n    %c${t}\n    ============================\n\n    ${n}\n\n    ============================\n    `.replace(/\n[^\S\r\n]+/g,"\n").trim(),,"font-weight:bold;font-family:monospace;"]})({title:t,message:n});switch(r){case is.debug:console.debug(...s);break;case is.info:console.info(...s);break;case is.warn:console.warn(...s);break;case is.error:console.error(...s);break;default:console.log(...s)}};cs.deprecate=e=>{let{pkg:t,subject:n,transition:r,level:o=is.warn,message:a="",callback:s=null}=e;const i=()=>{return cs({title:(t?t+" ":"")+"Deprecation Notice",message:`\n      ${n?`${e=n,e.charAt(0).toUpperCase()+e.slice(1)} is deprecated and will cease to work in future releases${t?" of "+t:""}.`:""}${a?"\n"+a:""}${r?`\nYou can learn more (including a guide on common transition paths) here: ${r}`:""}\n    `.trim(),level:o});var e};return"function"==typeof s?async function(){return await i(),await s(...arguments)}:i()};const us=(e,t,n)=>({label:e,asArgument:t,asInjection:n}),ls=e=>Array.isArray(e),ds=e=>"object"==typeof e,fs=e=>null==e,ps=e=>"number"==typeof e,hs=e=>Number.isInteger(e),gs=e=>"string"==typeof e,ys=e=>{throw new Error("Type Error: "+e)},ms=e=>{cs.deprecate({pkg:"@onflow/types",subject:`Passing in Number as value for ${e}`,message:`Going forward, use String as value for ${e}.`,transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/types/WARNINGS.md#0002-[U]Int*-and-Word*-as-Number"})},ws=us("Identity",(e=>e),(e=>e)),bs=us("UInt",(e=>ps(e)&&hs(e)?(ms("UInt"),{type:"UInt",value:e.toString()}):gs(e)?{type:"UInt",value:e}:void ys("Expected Positive Integer for type Unsigned Int")),(e=>e)),vs=us("Int",(e=>ps(e)&&hs(e)?(ms("Int"),{type:"Int",value:e.toString()}):gs(e)?{type:"Int",value:e}:void ys("Expected Integer for type Int")),(e=>e)),Es=us("UInt8",(e=>ps(e)&&hs(e)?(ms("UInt8"),{type:"UInt8",value:e.toString()}):gs(e)?{type:"UInt8",value:e}:void ys("Expected integer for UInt8")),(e=>e)),Is=us("Int8",(e=>ps(e)&&hs(e)?(ms("Int8"),{type:"Int8",value:e.toString()}):gs(e)?{type:"Int8",value:e}:void ys("Expected positive integer for Int8")),(e=>e)),Ss=us("UInt16",(e=>ps(e)&&hs(e)?(ms("UInt16"),{type:"UInt16",value:e.toString()}):gs(e)?{type:"UInt16",value:e}:void ys("Expected integer for UInt16")),(e=>e)),ks=us("Int16",(e=>ps(e)&&hs(e)?(ms("Int16"),{type:"Int16",value:e.toString()}):gs(e)?{type:"Int16",value:e}:void ys("Expected positive integer for Int16")),(e=>e)),As=us("UInt32",(e=>ps(e)&&hs(e)?(ms("UInt32"),{type:"UInt32",value:e.toString()}):gs(e)?{type:"UInt32",value:e}:void ys("Expected integer for UInt32")),(e=>e)),Rs=us("Int32",(e=>ps(e)&&hs(e)?(ms("Int32"),{type:"Int32",value:e.toString()}):gs(e)?{type:"Int32",value:e}:void ys("Expected positive integer for Int32")),(e=>e)),Ts=us("UInt64",(e=>ps(e)&&hs(e)?(ms("UInt64"),{type:"UInt64",value:e.toString()}):gs(e)?{type:"UInt64",value:e}:void ys("Expected integer for UInt64")),(e=>e)),Cs=us("Int64",(e=>ps(e)&&hs(e)?(ms("Int64"),{type:"Int64",value:e.toString()}):gs(e)?{type:"Int64",value:e}:void ys("Expected positive integer for Int64")),(e=>e)),_s=us("UInt128",(e=>ps(e)&&hs(e)?(ms("UInt128"),{type:"UInt128",value:e.toString()}):gs(e)?{type:"UInt128",value:e}:void ys("Expected integer for UInt128")),(e=>e)),xs=us("Int128",(e=>ps(e)&&hs(e)?(ms("Int128"),{type:"Int128",value:e.toString()}):gs(e)?{type:"Int128",value:e}:void ys("Expected positive integer for Int128")),(e=>e)),Os=us("UInt256",(e=>ps(e)&&hs(e)?(ms("UInt256"),{type:"UInt256",value:e.toString()}):gs(e)?{type:"UInt256",value:e}:void ys("Expected integer for UInt256")),(e=>e)),Ps=us("Int256",(e=>ps(e)&&hs(e)?(ms("Int256"),{type:"Int256",value:e.toString()}):gs(e)?{type:"Int256",value:e}:void ys("Expected integer for Int256")),(e=>e)),Ns=us("Word8",(e=>ps(e)&&hs(e)?(ms("Word8"),{type:"Word8",value:e.toString()}):gs(e)?{type:"Word8",value:e}:void ys("Expected positive number for Word8")),(e=>e)),Bs=us("Word16",(e=>ps(e)&&hs(e)?(ms("Word16"),{type:"Word16",value:e.toString()}):gs(e)?{type:"Word16",value:e}:void ys("Expected positive number for Word16")),(e=>e)),Us=us("Word32",(e=>ps(e)&&hs(e)?(ms("Word32"),{type:"Word32",value:e.toString()}):gs(e)?{type:"Word32",value:e}:void ys("Expected positive number for Word32")),(e=>e)),Ls=us("Word64",(e=>ps(e)&&hs(e)?(ms("Word64"),{type:"Word64",value:e.toString()}):gs(e)?{type:"Word64",value:e}:void ys("Expected positive number for Word64")),(e=>e)),Fs=()=>{cs.deprecate({subject:"Passing in Numbers as values for Fix64 and UFix64 types",pkg:"@onflow/types",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/types/WARNINGS.md#0001-[U]Fix64-as-Number"})},Ds=us("UFix64",(e=>{if(gs(e)){const t=e.split(".");return 2!==t.length&&ys(`Expected one decimal but found ${t.length} in the [U]Fix64 value. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`),(0==t[1].length||t[1].length>8)&&ys(`Expected at least one digit, and at most 8 digits following the decimal of the [U]Fix64 value but found ${t[1].length} digits. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`),t[1]=t[1].padEnd(8,"0"),{type:"UFix64",value:e=t.join(".")}}if(ps(e))return Fs(),{type:"UFix64",value:e.toString()};ys("Expected String for UFix64")}),(e=>e)),js=us("Fix64",(e=>{if(gs(e)){const t=e.split(".");return 2!==t.length&&ys(`Expected one decimal but found ${t.length} in the [U]Fix64 value. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`),(0==t[1].length||t[1].length>8)&&ys(`Expected at least one digit, and at most 8 digits following the decimal of the [U]Fix64 value but found ${t[1].length} digits. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers`),t[1]=t[1].padEnd(8,"0"),{type:"Fix64",value:e=t.join(".")}}if(ps(e))return Fs(),{type:"Fix64",value:e.toString()};ys("Expected String for Fix64")}),(e=>e)),Gs=us("String",(e=>{if(gs(e))return{type:"String",value:e};ys("Expected String for type String")}),(e=>e)),$s=us("Character",(e=>{if(gs(e))return{type:"Character",value:e};ys("Expected Character for type Character")}),(e=>e)),Ms=us("Bool",(e=>{if("boolean"==typeof e)return{type:"Bool",value:e};ys("Expected Boolean for type Bool")}),(e=>e)),zs=us("Address",(e=>{if(gs(e))return{type:"Address",value:e};ys("Expected Address for type Address")}),(e=>e)),qs=us("Void",(e=>{if(!e||fs(e))return{type:"Void"};ys("Expected Void for type Void")}),(e=>e)),Ys=us("Reference",(e=>{if(ds(e))return{type:"Reference",value:e};ys("Expected Object for type Reference")}),(e=>e)),Hs=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return us("Array",(t=>({type:"Array",value:ls(e)?e.map(((e,n)=>e.asArgument(t[n]))):t.map((t=>e.asArgument(t)))})),(e=>e))},Ks=us("Path",(e=>{if(ds(e))return gs(e.domain)||ys(`Expected a string for the Path domain but found ${e.domain}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`),"storage"!==e.domain&&"private"!==e.domain&&"public"!==e.domain&&ys(`Expected either "storage", "private" or "public" as the Path domain but found ${e.domain}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`),gs(e.identifier)||ys(`Expected a string for the Path identifier but found ${e.identifier}. Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path`),{type:"Path",value:{domain:e.domain,identifier:e.identifier}};ys("Expected Object for type Path")}),(e=>e));var Ws=Object.freeze({__proto__:null,Address:zs,Array:Hs,Bool:Ms,Character:$s,Dictionary:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return us("Dictionary",(t=>{if(ds(t))return{type:"Dictionary",value:ls(e)?e.map(((e,n)=>({key:e.key.asArgument(t[n].key),value:e.value.asArgument(t[n].value)}))):ls(t)?t.map((t=>({key:e.key.asArgument(t.key),value:e.value.asArgument(t.value)}))):[{key:e.key.asArgument(t.key),value:e.value.asArgument(t.value)}]};ys("Expected Object for type Dictionary")}),(e=>e))},Enum:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return us("Enum",(n=>{if(ds(n))return{type:"Enum",value:{id:e,fields:ls(t)?t.map(((e,t)=>({name:n.fields[t].name,value:e.value.asArgument(n.fields[t].value)}))):n.fields.map((e=>({name:e.name,value:t.value.asArgument(e.value)})))}};ys("Expected Object for type Enum")}),(e=>e))},Event:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return us("Event",(n=>{if(ds(n))return{type:"Event",value:{id:e,fields:ls(t)?t.map(((e,t)=>({name:n.fields[t].name,value:e.value.asArgument(n.fields[t].value)}))):n.fields.map((e=>({name:e.name,value:t.value.asArgument(e.value)})))}};ys("Expected Object for type Event")}),(e=>e))},Fix64:js,Identity:ws,Int:vs,Int128:xs,Int16:ks,Int256:Ps,Int32:Rs,Int64:Cs,Int8:Is,Optional:e=>us("Optional",(t=>({type:"Optional",value:fs(t)?null:e.asArgument(t)})),(e=>e)),Path:Ks,Reference:Ys,Resource:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return us("Resource",(n=>{if(ds(n))return{type:"Resource",value:{id:e,fields:ls(t)?t.map(((e,t)=>({name:n.fields[t].name,value:e.value.asArgument(n.fields[t].value)}))):n.fields.map((e=>({name:e.name,value:t.value.asArgument(e.value)})))}};ys("Expected Object for type Resource")}),(e=>e))},String:Gs,Struct:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return us("Struct",(n=>{if(ds(n))return{type:"Struct",value:{id:e,fields:ls(t)?t.map(((e,t)=>({name:n.fields[t].name,value:e.value.asArgument(n.fields[t].value)}))):n.fields.map((e=>({name:e.name,value:t.value.asArgument(e.value)})))}};ys("Expected Object for type Struct")}),(e=>e))},UFix64:Ds,UInt:bs,UInt128:_s,UInt16:Ss,UInt256:Os,UInt32:As,UInt64:Ts,UInt8:Es,Void:qs,Word16:Bs,Word32:Us,Word64:Ls,Word8:Ns,_Array:Hs});function Vs(e){return ca(e)?e(Do,Ws):[]}async function Js(e){let t,{url:n}=e;Ge(void 0!==n,"retrieve({ url }) -- url must be defined");try{t=await rt(n)}catch(e){throw new Error("httpDocumentResolver Error: Failed to retrieve document.")}return t.ok?await t.json():null}const Xs=new Map([["http",Js],["https",Js]]);function Zs(e){if(null==e)return null;if("1.0.0"===e.f_version)return e;throw new Error("normalizeInteractionTemplate Error: Invalid InteractionTemplate")}function Qs(e){let{network:t,template:n}=e;if(ko(null!=t,"deriveCadenceByNetwork({ network }) -- network must be defined"),ko("string"==typeof t,"deriveCadenceByNetwork({ network }) -- network must be a string"),ko(null!=n,"generateDependencyPin({ template }) -- template must be defined"),ko("object"==typeof n,"generateDependencyPin({ template }) -- template must be an object"),ko("InteractionTemplate"===n.f_type,"generateDependencyPin({ template }) -- template must be an InteractionTemplate"),n=Zs(n),"1.0.0"===n.f_version){return Object.keys(n?.data?.dependencies).map((e=>{let r=Object.values(n?.data?.dependencies?.[e]);ko(r,`deriveCadenceByNetwork -- Could not find contracts for dependency placeholder: ${e}`),ko(0===r.length,`deriveCadenceByNetwork -- Could not find contracts for dependency placeholder: ${e}`);let o=r[0],a=o?.[t];return ko(a,`deriveCadenceByNetwork -- Could not find ${t} network information for dependency: ${e}`),[e,a.address]})).reduce(((e,t)=>{let[n,r]=t;const o=new RegExp("(\\b"+n+"\\b)","g");return e.replace(o,r)}),n.data.cadence)}throw new Error("deriveCadenceByNetwork Error: Unsupported template version")}async function ei(e){ia(e?.template)&&(e.template=await async function(e){let{url:t}=e;Ge(void 0!==t,"retrieve({ url }) -- url must be defined"),Ge("string"==typeof t,"retrieve({ url }) -- url must be a string");const n=await Ue().where(/^document\.resolver\./);Object.keys(n).map((e=>{const t=n[e],r=e.replace(/^document\.resolver\./,"");Xs.set(r,t)}));const r=/^(.*):\/\/([A-Za-z0-9\-\.]+)(:[0-9]+)?(.*)$/.exec(t);Ge(r,"Failed to parse URL");const o=r[1];Ge(r,"Failed to parse URL protocol");const a=Xs.get(o);return Ge(a,`No resolver found for protcol=${o}`),await a({url:t})}({url:e?.template}));let t={};e?.template&&(e.template=Zs(e?.template),t=await async function(e){let{template:t}=e;const n=await Zo();Ge(n,"FCL configureDependencies Error: Missing configuration value for 'flow.network'");const r={};if("1.0.0"===t.f_version){const e=Object.keys(t?.data?.dependencies);for(let o of e){let e=t?.data?.dependencies[o];const a=Object.keys(e);Ge(a.length>0,`FCL configureDependencies Error: No contracts found in template for placeholder=${o}`);const s=e[a[0]][n];Ge(s,`FCL configureDependencies Error: No dependency information for placeholder=${o} contract=${a[0]} network=${n}`),Ge(s?.address,`FCL configureDependencies Error: No address information for placeholder=${o} contract=${a[0]} network=${n}`),r[o]=at(s?.address)}return r}throw new Error("FCL configureDependencies Error: Unsupported template version")}({template:e.template}));const n=e.cadence||Qs({template:e.template,network:await Zo()});return e.cadence=n,e.dependencies=t,e}async function ti(e,t){Ge(aa(t),`${e}(opts) -- opts is required`),Ge(sa(t),`${e}(opts) -- opts must be an object`),Ge(!(t.cadence&&t.template),`${e}({ template, cadence }) -- cannot pass both cadence and template`),Ge(aa(t.cadence||t?.template),`${e}({ cadence }) -- cadence is required`),Ge(ia(t.cadence)||t?.template,`${e}({ cadence }) -- cadence must be a string`),Ge(t.cadence||await Ue().get("flow.network"),`${e}(opts) -- Required value for "flow.network" not defined in config. See: https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/src/exec/query.md#configuration`),Ge(await Ue().get("accessNode.api"),`${e}(opts) -- Required value for "accessNode.api" not defined in config. See: https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/src/exec/query.md#configuration`)}async function ni(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await async function(e){return ti("query",e)}(e),e=await ei(e),Ue().overload(e.dependencies||{},(async()=>Ao([Mo(e.cadence),Fo(Vs(e.args||[])),e.limit&&"number"==typeof e.limit&&Lo(e.limit)]).then(Ro)))}const ri={f_type:"Service",f_vsn:"1.0.0"},oi={f_type:"Identity",f_vsn:"1.0.0"},ai={f_type:"USER",f_vsn:"1.0.0"},si={f_type:"PollingResponse",f_vsn:"1.0.0"},ii={f_type:"CompositeSignature",f_vsn:"1.0.0"};function ci(e){return null==e?null:"1.0.0"===e.f_vsn?e:{old:e,...ri,type:"frame",endpoint:e.endpoint,params:e.params||{},data:e.data||{}}}function ui(e){return null==e?null:"1.0.0"===e.f_vsn?e:{...ri,type:"back-channel-rpc",endpoint:e.endpoint,method:e.method,params:e.params||{},data:e.data||{}}}function li(e){return null==e?null:(null==e.method&&(e={...e,type:"local-view",method:"VIEW/IFRAME"}),"1.0.0"===e.f_vsn?e:{...ri,type:e.type||"local-view",method:e.method,endpoint:e.endpoint,data:e.data||{},params:e.params||{}})}const di={"back-channel-rpc":ui,"pre-authz":function(e){return null==e?null:"1.0.0"===e.f_vsn?e:{...ri,type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:{...oi,address:at(e.addr),keyId:e.keyId},params:e.params,data:e.data}},authz:function(e){return null==e?null:"1.0.0"===e.f_vsn?e:{...ri,type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:{...oi,address:at(e.addr),keyId:e.keyId},params:e.params,data:e.data}},authn:function(e){return null==e?null:"1.0.0"===e.f_vsn?e:{...ri,type:e.type,uid:e.id,endpoint:e.authn,id:e.pid,provider:{address:at(e.addr),name:e.name,icon:e.icon}}},frame:ci,"open-id":function(e){return null==e?null:"1.0.0"===e.f_vsn?e:null},"user-signature":function(e){if(null==e)return null;if("1.0.0"===e.f_vsn)return e;throw new Error("Invalid user-signature service")},"local-view":li,"account-proof":function(e){if(null==e)return null;if("1.0.0"===e.f_vsn)return e;throw new Error("FCL Normalizer Error: Invalid account-proof service")},"authn-refresh":function(e){if(null==e)return null;if("1.0.0"===e.f_vsn)return e;throw new Error("Invalid authn-refresh service")}};function fi(e){return Ze([e.provider.address||e.provider.name||"UNSPECIFIED",e.id]).toString("hex")}async function pi(e){var t=function(){return[...arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],...arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]]}((e=function(e){return e.addr=e.addr?at(e.addr):null,e.paddr=e.paddr?at(e.paddr):null,e}(e)).services||[],await async function(e,t){if(null==e||null==t)return[];const n=new URL(e);n.searchParams.append("code",t);const r=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json()));if(Array.isArray(r))return r;const o=[];if(Array.isArray(r.authorizations))for(let e of r.authorizations)o.push({type:"authz",keyId:r.keyId,...e});return null!=r.provider&&o.push({type:"authn",id:"wallet-provider#authn",...r.provider}),o}(e.hks,e.code)).map((t=>function(e,t){try{return di[e.type](e,t)}catch(t){return console.error(`Unrecognized FCL Service Type [${e.type}]`,e,t),e}}(t,e)));const n=function(e,t){return t.find((t=>t.type===e))}("authn",t);return{...ai,addr:at(e.addr),cid:fi(n),loggedIn:!0,services:t,expiresAt:e.expires}}function hi(){let e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find((t=>t.type===e))}function gi(e){const t=new URL(e.endpoint);if(window?.location?.origin&&t.searchParams.append("l6n",window.location.origin),null!=e.params)for(let[n,r]of Object.entries(e.params||{}))t.searchParams.append(n,r);return t}function yi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.method||"POST",r="GET"===n?void 0:JSON.stringify(t.data||e.data||{});return fetch(gi(e),{method:n,headers:{...e.headers||{},...t.headers||{},"Content-Type":"application/json"},body:r}).then((e=>e.json()))}function mi(e){return null==e?null:"1.0.0"===e.f_vsn?e:{...si,status:e.status??"APPROVED",reason:e.reason??null,data:e.compositeSignature||e.data||{...e}||{},updates:ui(e.authorizationUpdates),local:ci((e.local||[])[0])}}const wi={"HTTP/GET":"GET","HTTP/POST":"POST"},bi=e=>(Ge(wi[e.method],"Invalid Service Method for type back-channel-rpc",{service:e}),wi[e.method]);async function vi(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!0;if(Ge(e,"Missing Polling Service",{service:e}),!n())throw new Error("Externally Halted");try{if("undefined"!=typeof document&&"hidden"===document.visibilityState)return await new Promise((e=>setTimeout(e,500))),vi(e,n);t=await yi(e,{method:bi(e)}).then(mi)}catch(e){throw e}switch(t.status){case"APPROVED":return t.data;case"DECLINED":throw new Error(`Declined: ${t.reason||"No reason supplied."}`);default:return await new Promise((e=>setTimeout(e,500))),vi(t.updates,n)}}const Ei="FCL_IFRAME",Ii="\n  position:fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n  height: 100%;\n  width: 100vw;\n  display:block;\n  background:rgba(0,0,0,0.25);\n  z-index: 2147483647;\n  box-sizing: border-box;\n  color-scheme: light;\n";function Si(e){Ge(!document.getElementById(Ei),"Attempt at triggering multiple Frames",{src:e});const t=document.createElement("iframe");t.src=e,t.id=Ei,t.allow="usb *; hid *",t.frameBorder="0",t.style.cssText=Ii,document.body.append(t);return[t.contentWindow,()=>{document.getElementById(Ei)&&document.getElementById(Ei).remove()}]}const ki="FCL_POP";let Ai=null,Ri=null;function Ti(e){null==Ai||Ai?.closed?Ai=function(e,t,n,r,o){const a=n.top.outerHeight/2+n.top.screenY-o/2,s=n.top.outerWidth/2+n.top.screenX-r/2,i=n.open(e,t,`toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${r}, height=${o}, top=${a}, left=${s}`);if(!i)throw new Error("Popup failed to open (was it blocked by a popup blocker?)");return i}(e,ki,window,640,770):Ri!==e?(Ai.location.replace(e),Ai.focus()):Ai.focus(),Ri=e;return[Ai,()=>{Ai&&!Ai.closed&&Ai.close(),Ai=null}]}let Ci=null,_i=null;function xi(e){if(null==Ci||Ci?.closed){if(Ci=window.open(e,"_blank"),!Ci)throw new Error("Tab failed to open (was it blocked by the browser?)")}else _i!==e?(Ci.location.replace(e),Ci.focus()):Ci.focus();_i=e;return[Ci,()=>{Ci&&!Ci.closed&&Ci.close(),Ci=null}]}const Oi={"VIEW/IFRAME":Si,"VIEW/POP":Ti,"VIEW/TAB":xi};async function Pi(e){let{service:t,body:n,config:r,opts:o}=e;const a=await yi(t,{data:{fclVersion:ra,service:{params:t.params,data:t.data,type:t.type},config:r,...n}}).then(mi);if("APPROVED"===a.status)return a.data;if("DECLINED"===a.status)throw new Error(`Declined: ${a.reason||"No reason supplied."}`);if("REDIRECT"===a.status)return a;if("PENDING"===a.status){var s=!0;const[e,t]=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return Oi[e.method](gi(e),t)}catch(n){throw console.error("execLocal({service, opts = {}})",n,{service:e,opts:t}),n}}(li(a.local)),n=()=>{try{t(),s=!1}catch(e){console.error("Frame Close Error",e)}};return vi(a.updates,(()=>s)).then((e=>(n(),e))).catch((e=>{throw console.error(e),n(),e}))}throw console.error("Auto Decline: Invalid Response",{service:t,resp:a}),new Error("Auto Decline: Invalid Response")}var Ni="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",Bi=Ni.length;function Ui(){for(var e="",t=32;t--;)e+=Ni[Math.random()*Bi|0];return e}const Li="FCL:VIEW:CLOSE",Fi="FCL:VIEW:READY",Di="FCL:VIEW:RESPONSE",ji=e=>"string"==typeof e&&e.toLowerCase(),Gi=new Set(["monetizationstart","monetizationpending","monetizationprogress","monetizationstop"]),$i=(e,t)=>console.warn("DEPRECATION NOTICE",`Received ${e}, please use ${t} for this and future versions of FCL`),Mi=e=>{let{close:t,send:n,onReady:r,onResponse:o,onMessage:a}=e;return e=>{try{if("object"!=typeof e.data)return;if(Gi.has(e.data.type))return;ji(e.data.type)===ji(Li)&&t(),ji(e.data.type)===ji(Fi)&&r(e,{send:n,close:t}),ji(e.data.type)===ji(Di)&&o(e,{send:n,close:t}),a(e,{send:n,close:t}),ji(e.data.type)===ji("FCL:FRAME:READY")&&($i(e.data.type,Fi),r(e,{send:n,close:t})),ji(e.data.type)===ji("FCL:FRAME:RESPONSE")&&($i(e.data.type,Di),o(e,{send:n,close:t})),ji(e.data.type)===ji("FCL:FRAME:CLOSE")&&($i(e.data.type,Li),t()),ji(e.data.type)===ji("FCL::CHALLENGE::RESPONSE")&&($i(e.data.type,Di),o(e,{send:n,close:t})),ji(e.data.type)===ji("FCL::AUTHZ_READY")&&($i(e.data.type,Fi),r(e,{send:n,close:t})),ji(e.data.type)===ji("FCL::CHALLENGE::CANCEL")&&($i(e.data.type,Li),t()),ji(e.data.type)===ji("FCL::CANCEL")&&($i(e.data.type,Li),t())}catch(e){console.error("Frame Callback Error",e),t()}}},zi=()=>{};const qi=()=>{};const Yi=()=>{};const Hi=()=>{};const Ki={"HTTP/RPC":Pi,"HTTP/POST":Pi,"IFRAME/RPC":function(e){let{service:t,body:n,config:r,opts:o}=e;return new Promise(((e,a)=>{const s=Ui(),i=o.includeOlderJsonRpcCall;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e)return{send:zi,close:zi};const n=t.onClose||zi,r=t.onMessage||zi,o=t.onReady||zi,a=t.onResponse||zi,s=Mi({close:u,send:l,onReady:o,onResponse:a,onMessage:r});window.addEventListener("message",s);const[i,c]=Si(gi(e));return{send:l,close:u};function u(){try{window.removeEventListener("message",s),c(),n()}catch(e){console.error("Frame Close Error",e)}}function l(e){try{i.postMessage(JSON.parse(JSON.stringify(e||{})),"*")}catch(t){console.error("Frame Send Error",e,t)}}}(t,{async onReady(e,o){let{send:a}=o;try{a({type:"FCL:VIEW:READY:RESPONSE",fclVersion:ra,body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),a({fclVersion:ra,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),i&&a({jsonrpc:"2.0",id:s,method:"fcl:sign",params:[n,t.params],deprecated:{message:"jsonrpc is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}})}catch(e){throw e}},onResponse(t,n){let{close:r}=n;try{if("object"!=typeof t.data)return;const n=mi(t.data);switch(n.status){case"APPROVED":e(n.data),r();break;case"DECLINED":a(`Declined: ${n.reason||"No reason supplied"}`),r();break;case"REDIRECT":e(n),r();break;default:a("Declined: No reason supplied"),r()}}catch(e){throw console.error("execIframeRPC onResponse error",e),e}},onMessage(t,n){let{close:r}=n;try{if("object"!=typeof t.data)return;if("2.0"!==t.data.jsonrpc)return;if(t.data.id!==s)return;const n=mi(t.data.result);switch(n.status){case"APPROVED":e(n.data),r();break;case"DECLINED":a(`Declined: ${n.reason||"No reason supplied"}`),r();break;case"REDIRECT":e(n),r();break;default:a("Declined: No reason supplied"),r()}}catch(e){throw console.error("execIframeRPC onMessage error",e),e}},onClose(){a("Declined: Externally Halted")}})}))},"POP/RPC":function(e){let{service:t,body:n,config:r,opts:o}=e;return new Promise(((e,a)=>{const s=Ui(),{redir:i,includeOlderJsonRpcCall:c}=o;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e)return{send:qi,close:qi};const n=t.onClose||qi,r=t.onMessage||qi,o=t.onReady||qi,a=t.onResponse||qi,s=Mi({close:l,send:d,onReady:o,onResponse:a,onMessage:r});window.addEventListener("message",s);const[i,c]=Ti(gi(e)),u=setInterval((function(){i&&i.closed&&l()}),500);return{send:d,close:l};function l(){try{window.removeEventListener("message",s),clearInterval(u),c(),n()}catch(e){console.error("Popup Close Error",e)}}function d(e){try{i.postMessage(JSON.parse(JSON.stringify(e||{})),"*")}catch(t){console.error("Popup Send Error",e,t)}}}(t,{async onReady(e,o){let{send:a}=o;try{a({fclVersion:ra,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),a({fclVersion:ra,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),c&&a({jsonrpc:"2.0",id:s,method:"fcl:sign",params:[n,t.params]})}catch(e){throw e}},onResponse(t,n){let{close:r}=n;try{if("object"!=typeof t.data)return;const n=mi(t.data);switch(n.status){case"APPROVED":e(n.data),!i&&r();break;case"DECLINED":a(`Declined: ${n.reason||"No reason supplied"}`),r();break;case"REDIRECT":e(n),r();break;default:a("Declined: No reason supplied"),r()}}catch(e){throw console.error("execPopRPC onResponse error",e),e}},onMessage(t,n){let{close:r}=n;try{if("object"!=typeof t.data)return;if("2.0"!==t.data.jsonrpc)return;if(t.data.id!==s)return;const n=mi(t.data.result);switch(n.status){case"APPROVED":e(n.data),!i&&r();break;case"DECLINED":a(`Declined: ${n.reason||"No reason supplied"}`),r();break;case"REDIRECT":e(n),r();break;default:a("Declined: No reason supplied"),r()}}catch(e){throw console.error("execPopRPC onMessage error",e),e}},onClose(){a("Declined: Externally Halted")}})}))},"TAB/RPC":function(e){let{service:t,body:n,config:r,opts:o}=e;return new Promise(((e,a)=>{const s=Ui(),{redir:i,includeOlderJsonRpcCall:c}=o;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e)return{send:Yi,close:Yi};const n=t.onClose||Yi,r=t.onMessage||Yi,o=t.onReady||Yi,a=t.onResponse||Yi,s=Mi({close:l,send:d,onReady:o,onResponse:a,onMessage:r});window.addEventListener("message",s);const[i,c]=xi(gi(e)),u=setInterval((function(){i&&i.closed&&l()}),500);return{send:d,close:l};function l(){try{window.removeEventListener("message",s),clearInterval(u),c(),n()}catch(e){console.error("Tab Close Error",e)}}function d(e){try{i.postMessage(JSON.parse(JSON.stringify(e||{})),"*")}catch(t){console.error("Tab Send Error",e,t)}}}(t,{async onReady(e,o){let{send:a}=o;try{a({fclVersion:ra,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r}),a({fclVersion:ra,type:"FCL:FRAME:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),c&&a({jsonrpc:"2.0",id:s,method:"fcl:sign",params:[n,t.params]})}catch(e){throw e}},onResponse(t,n){let{close:r}=n;try{if("object"!=typeof t.data)return;const n=mi(t.data);switch(n.status){case"APPROVED":e(n.data),!i&&r();break;case"DECLINED":a(`Declined: ${n.reason||"No reason supplied"}`),r();break;case"REDIRECT":e(n),r();break;default:a("Declined: No reason supplied"),r()}}catch(e){throw console.error("execPopRPC onResponse error",e),e}},onMessage(t,n){let{close:r}=n;try{if("object"!=typeof t.data)return;if("2.0"!==t.data.jsonrpc)return;if(t.data.id!==s)return;const n=mi(t.data.result);switch(n.status){case"APPROVED":e(n.data),!i&&r();break;case"DECLINED":a(`Declined: ${n.reason||"No reason supplied"}`),r();break;case"REDIRECT":e(n),r();break;default:a("Declined: No reason supplied"),r()}}catch(e){throw console.error("execPopRPC onMessage error",e),e}},onClose(){a("Declined: Externally Halted")}})}))},"EXT/RPC":function(e){let{service:t,body:n,config:r,opts:o}=e;return new Promise(((e,o)=>{!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e)return{send:Hi,close:Hi};const n=t.onClose||Hi,r=t.onMessage||Hi,o=t.onReady||Hi,a=t.onResponse||Hi,s=Mi({close:i,send:c,onReady:o,onResponse:a,onMessage:r});return window.addEventListener("message",s),c({service:e}),{send:c,close:i};function i(){try{window.removeEventListener("message",s),n()}catch(e){console.error("Ext Close Error",e)}}function c(e){try{window&&window.postMessage(JSON.parse(JSON.stringify(e||{})),"*")}catch(t){console.error("Ext Send Error",e,t)}}}(t,{async onReady(e,o){let{send:a}=o;try{a({fclVersion:ra,type:"FCL:VIEW:READY:RESPONSE",body:n,service:{params:t.params,data:t.data,type:t.type},config:r})}catch(e){throw e}},onResponse(t,n){let{close:r}=n;try{if("object"!=typeof t.data)return;const n=mi(t.data);switch(n.status){case"APPROVED":e(n.data),r();break;case"DECLINED":o(`Declined: ${n.reason||"No reason supplied"}`),r();break;case"REDIRECT":e(n),r();break;default:o("Declined: No reason supplied"),r()}}catch(e){throw console.error("execExtRPC onResponse error",e),e}},onClose(){o("Declined: Externally Halted")}})}))}},Wi=["ServicePlugin"],Vi=["discovery-service"],Ji=(()=>{let e=new Set,t=new Map(Object.entries(Ki));const n=t=>e=new Set([...t]);return Object.freeze({add:e=>{if(Ge(Vi.includes(e.type),`Service Plugin type ${e.type} is not supported`),"discovery-service"===e.type){const{discoveryServices:r,serviceStrategy:o}=(e=>{const{services:t,serviceStrategy:n}=e;Ge(Array.isArray(t)&&t.length,"Array of Discovery Services is required");for(const e of t)Ge(aa(e.f_type)&&"Service"===e.f_type,"Service is required"),Ge(aa(e.type)&&"authn"===e.type,`Service must be type authn. Received ${e.type}`),Ge(e.method in Ki||n.method===e.method,`Service method ${e.method} is not supported`);return Ge(aa(n),"Service strategy is required"),Ge(aa(n.method)&&ia(n.method),"Service strategy method is required"),Ge(aa(n.exec)&&ca(n.exec),"Service strategy exec function is required"),{discoveryServices:t,serviceStrategy:n}})(e);n(r),t.has(o.method)?je({title:"Add Service Plugin",message:`Service strategy for ${o.method} already exists`,level:De.warn}):t.set(o.method,o.exec)}},getServices:()=>[...e],getStrategy:e=>t.get(e),getStrategies:()=>[...t.keys()]})})(),Xi=(()=>{const e=new Map;return Object.freeze({add:t=>{const n=(e=>{let t;Ge(e,"No plugins supplied"),t=Array.isArray(e)?[...e]:[e];for(const e of t)Ge(aa(e.name),"Plugin name is required"),Ge(aa(e.f_type),"Plugin f_type is required"),Ge(Wi.includes(e.f_type),`Plugin type ${e.f_type} is not supported`);return t})(t);for(const t of n)e.set(t.name,t),"ServicePlugin"===t.f_type&&Ji.add(t)},getPlugins:()=>e})})(),Zi=async e=>{let{service:t,body:n,config:r,opts:o}=e;return Ji.getStrategy(t.method)({service:t,body:n,config:r,opts:o})};async function Qi(e){let{service:t,msg:n={},config:r={},opts:o={}}=e;n.data=t.data;const a={services:await na(/^service\./),app:await na(/^app\.detail\./),client:{...r.client,fclVersion:ra,fclLibrary:"https://github.com/onflow/fcl-js",hostname:window?.location?.hostname??null,network:await Zo()}};try{const e=await Zi({service:t,body:n,config:a,opts:o});return"REDIRECT"===e.status?(Ge(t.type===e.data.type,"Cannot shift recursive service type in execService"),await Qi({service:e.data,msg:n,config:a,opts:o})):e}catch(e){throw je({title:`Error on execService ${t?.type}`,message:e,level:De.error}),e}}function ec(e){return null==e?null:"1.0.0"===e.f_vsn?e:{...ii,addr:ot(e.addr||e.address),signature:e.signature||e.sig,keyId:e.keyId}}const tc=async()=>[...window?.fcl_extensions||[],...Ji.getServices()];const nc="authn",rc="UPDATED",oc="UPDATE_RESULTS",ac=async()=>{try{const e=await async function(e){let{types:t}=e;const n=await Ue.get("discovery.authn.endpoint");Ge(Boolean(n),'"discovery.authn.endpoint" in config must be defined.');const r=await Ue.get("discovery.authn.include",[]),o=new URL(n);return fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:t,fclVersion:ra,include:r,clientServices:await tc(),supportedStrategies:Ji.getStrategies(),userAgent:window?.navigator?.userAgent,network:await Zo()})}).then((e=>e.json()))}({types:[nc]});y(nc,oc,{results:e})}catch(e){je({title:`${e.name} Error fetching Discovery API services.`,message:e.message,level:De.error})}},sc={[s]:async e=>{var t,n;t="undefined"==typeof window,n='"fcl.discovery" is only available in the browser.',t&&console.warn(`\n      %cFCL Warning\n      ============================\n      ${n}\n      For more info, please see the docs: https://docs.onflow.org/fcl/\n      ============================\n      `,"font-weight:bold;font-family:monospace;"),"complete"===document.readyState?ac():window.onload=async()=>{ac()}},[oc]:(e,t,n)=>{e.merge(n),e.broadcast(rc,{...e.all()})},[i]:(e,t)=>{e.subscribe(t.from),e.send(t.from,rc,{...e.all()})},[c]:(e,t)=>e.unsubscribe(t.from),["SNAPSHOT"]:async(e,t)=>t.reply({...e.all()})},ic=()=>b(sc,nc),cc={authn:{subscribe:e=>v(nc,ic,e),snapshot:()=>E(nc,ic),update:()=>ac()}},uc=e=>"function"==typeof e,lc="CURRENT_USER",dc="CURRENT_USER/UPDATED",fc="SNAPSHOT",pc="SET_CURRENT_USER",hc="DEL_CURRENT_USER",gc='{\n  "f_type": "User",\n  "f_vsn": "1.0.0",\n  "addr":null,\n  "cid":null,\n  "loggedIn":null,\n  "expiresAt":null,\n  "services":[]\n}',yc={[s]:async e=>{"undefined"==typeof window&&console.warn('\n        %cFCL Warning\n        ============================\n        "currentUser" is only available in the browser.\n        For more info, please see the docs: https://docs.onflow.org/fcl/\n        ============================\n        ',"font-weight:bold;font-family:monospace;"),e.merge(JSON.parse(gc));const t=await Ue.first(["fcl.storage","fcl.storage.default"]);if(t.can){const n=await(async e=>{const t=JSON.parse(gc),n=await e.get(lc);return null!=n&&t.f_vsn!==n.f_vsn?(e.removeItem(lc),t):n||t})(t);(function(e){return null==e.expiresAt||0===e.expiresAt||e.expiresAt>Date.now()})(n)&&e.merge(n)}},[i]:(e,t)=>{e.subscribe(t.from),e.send(t.from,dc,{...e.all()})},[c]:(e,t)=>{e.unsubscribe(t.from)},[fc]:async(e,t)=>{t.reply({...e.all()})},[pc]:async(e,t,n)=>{e.merge(n);const r=await Ue.first(["fcl.storage","fcl.storage.default"]);r.can&&r.put(lc,e.all()),e.broadcast(dc,{...e.all()})},[hc]:async(e,t)=>{e.merge(JSON.parse(gc));const n=await Ue.first(["fcl.storage","fcl.storage.default"]);n.can&&n.put(lc,e.all()),e.broadcast(dc,{...e.all()})}},mc=()=>b(yc,lc);const wc=async e=>{let{discoveryAuthnInclude:t}=e;return{client:{discoveryAuthnInclude:t,clientServices:await tc(),supportedStrategies:Ji.getStrategies()}}};async function bc(){let{service:e,redir:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e||e?.provider?.is_installed||!e?.provider?.requires_install)return new Promise((async(n,r)=>{mc();const o={redir:t},a=await kc(),s=await async function(e){const t=await Ue.get("discovery.authn.include",[]),n=await Ue.first(["discovery.wallet.method","discovery.wallet.method.default"]),r=e?.method?e.method:n,o=e?.endpoint??await Ue.first(["discovery.wallet","challenge.handshake"]);return Ge(o,'\n    If no service is passed to "authenticate," then "discovery.wallet" must be defined in fcl config.\n    See: "https://docs.onflow.org/fcl/reference/api/#setting-configuration-values"\n    '),{...e,type:"authn",endpoint:o,method:r,discoveryAuthnInclude:t}}(e),i=hi(a.services,"authn-refresh");let c;if(a.loggedIn){if(!i)return n(a);try{const e=await Qi({service:i,msg:c,opts:o});y(lc,pc,await pi(e))}catch(e){je({title:`${e.name} Could not refresh wallet authentication.`,message:e.message,level:De.error})}finally{return n(await kc())}}try{c=await async function(){let e=await Ue.get("fcl.accountProof.resolver");if(null==e)return;if(!uc(e))return void je({title:"Account Proof Data Resolver must be a function",message:`Check fcl.accountProof.resolver configuration.\n                Expected: fcl.accountProof.resolver: async () => { ... }\n                Received: fcl.accountProof.resolver: ${typeof e}\n                `,level:De.warn});const t=await e();return null!=t?(Ge("string"==typeof t.appIdentifier,"appIdentifier must be a string"),Ge(/^[0-9a-f]+$/i.test(t.nonce),"Nonce must be a hex string"),t):void 0}()}catch(e){return je({title:`${e.name} On Authentication: Could not resolve account proof data.`,message:e.message,level:De.error}),r(e)}try{const e=await Qi({service:s,msg:c,config:await wc(s),opts:o});y(lc,pc,await pi(e))}catch(e){je({title:`${e} On Authentication`,message:e,level:De.error})}finally{n(await kc())}}));window.location.href=e?.provider?.install_link}function vc(){mc(),y(lc,hc)}const Ec=e=>({f_type:"PreAuthzResponse",f_vsn:"1.0.0",proposer:(e||{}).proposer,payer:(e||{}).payer||[],authorization:(e||{}).authorization||[]});async function Ic(e){return mc(),{...e,tempId:"CURRENT_USER",async resolve(e,t){const n=await bc({redir:!0}),r=hi(n.services,"authz"),o=hi(n.services,"pre-authz");if(o)return function(e){const t=Ec(e),n=[];null!=t.proposer&&n.push(["PROPOSER",t.proposer]);for(let e of t.payer||[])n.push(["PAYER",e]);for(let e of t.authorization||[])n.push(["AUTHORIZER",e]);return n.map((e=>{let[t,n]=e;return{tempId:[n.identity.address,n.identity.keyId].join("|"),addr:n.identity.address,keyId:n.identity.keyId,signingFunction:e=>Qi({service:n,msg:e}),role:{proposer:"PROPOSER"===t,payer:"PAYER"===t,authorizer:"AUTHORIZER"===t}}}))}(await Qi({service:o,msg:t}));if(r){let t;return ea()&&"WC/RPC"===r.method&&(t=window.open("","_blank")),{...e,tempId:"CURRENT_USER",resolve:null,addr:ot(r.identity.address),keyId:r.identity.keyId,sequenceNum:null,signature:null,signingFunction:async e=>ec(await Qi({service:r,msg:e,opts:{includeOlderJsonRpcCall:!0,windowRef:t}}))}}throw new Error("No Authz or PreAuthz Service configured for CURRENT_USER")}}}function Sc(e){mc();const t="@EXIT",n=b((async n=>{for(n.send(lc,i);;){const r=await n.receive();if(r.tag===t)return void n.send(lc,c);e(r.data)}}));return()=>y(n,t)}function kc(){return mc(),y(lc,fc,null,{expectReply:!0,timeout:0})}async function Ac(){const{addr:e}=await bc();return Do(at(e),zs)}const Rc=e=>(Ge(/^[0-9a-f]+$/i.test(e),"Message must be a hex string"),{message:e});async function Tc(e){mc();const t=hi((await bc({redir:!0})).services,"user-signature");Ge(t,"Current user must have authorized a signing service.");try{const n=await Qi({service:t,msg:Rc(e)});return Array.isArray(n)?n.map((e=>ec(e))):[ec(n)]}catch(e){return e}}let Cc=()=>({authenticate:bc,unauthenticate:vc,authorization:Ic,signUserMessage:Tc,subscribe:Sc,snapshot:kc,resolveArgument:Ac});Cc.authenticate=bc,Cc.unauthenticate=vc,Cc.authorization=Ic,Cc.signUserMessage=Tc,Cc.subscribe=Sc,Cc.snapshot=kc,Cc.resolveArgument=Ac;const _c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};const n=n=>{const{data:r}=n;"object"==typeof r&&null!=typeof r&&r.type===e&&t((e=>(e.deprecated&&console.warn("DEPRECATION NOTICE",e.deprecated.message),delete e?.body?.interaction,e))(r))};return window.addEventListener("message",n),()=>window.removeEventListener("message",n)},xc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(window.location!==window.parent.location)window.parent.postMessage({...t,type:e},"*");else{if(!window.opener)throw new Error("Unable to communicate with parent FCL instance");window.opener.postMessage({...t,type:e},"*")}};const Oc=(e,t)=>$e.Buffer.from(e.padEnd(2*t,"0"),"hex"),Pc=e=>((e,t)=>$e.Buffer.from(e.padStart(2*t,"0"),"hex"))(e,8),Nc=e=>$e.Buffer.from(e,"hex"),Bc=function(e){let{address:t,nonce:n,appIdentifier:r}=e,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Ge(t,"Encode Message For Provable Authn Error: address must be defined"),Ge(n,"Encode Message For Provable Authn Error: nonce must be defined"),Ge(r,"Encode Message For Provable Authn Error: appIdentifier must be defined"),Ge(n.length>=64,"Encode Message For Provable Authn Error: nonce must be minimum of 32 bytes");const a=Oc($e.Buffer.from("FCL-ACCOUNT-PROOF-V0.0").toString("hex"),32);return o?$e.Buffer.concat([a,Ze([r,Pc(ot(t)),Nc(n)])]).toString("hex"):Ze([r,Pc(ot(t)),Nc(n)]).toString("hex")};var Uc=Object.freeze({__proto__:null,sendMsgToFCL:xc,ready:function(e){_c("FCL:VIEW:READY:RESPONSE",e),xc("FCL:VIEW:READY")},close:()=>{xc("FCL:VIEW:CLOSE")},approve:e=>{xc("FCL:VIEW:RESPONSE",{f_type:"PollingResponse",f_vsn:"1.0.0",status:"APPROVED",reason:null,data:e})},decline:e=>{xc("FCL:VIEW:RESPONSE",{f_type:"PollingResponse",f_vsn:"1.0.0",status:"DECLINED",reason:e,data:null})},redirect:e=>{xc("FCL:VIEW:RESPONSE",{f_type:"PollingResponse",f_vsn:"1.0.0",status:"REDIRECT",reason:null,data:e})},onMessageFromFCL:_c,encodeMessageFromSignable:(e,t)=>{let n=(e=>{let t=new Set(e.authorizers);return t.add(e.proposalKey.address),t.delete(e.payer),Array.from(t).map(at)})(e.voucher),r=(e=>{let t=new Set([e.payer]);return Array.from(t).map(at)})(e.voucher);const o=n.includes(at(t)),a=r.includes(at(t));if(!o&&!a)throw new To(t);const s={cadence:e.voucher.cadence,refBlock:e.voucher.refBlock,computeLimit:e.voucher.computeLimit,arguments:e.voucher.arguments,proposalKey:{...e.voucher.proposalKey,address:ot(e.voucher.proposalKey.address)},payer:ot(e.voucher.payer),authorizers:e.voucher.authorizers.map(ot),payloadSigs:e.voucher.payloadSigs.map((e=>({...e,address:ot(e.address)})))};return o?Cr(s):_r(s)},CompositeSignature:function(e,t,n){this.f_type=ii.f_type,this.f_vsn=ii.f_vsn,this.addr=at(e),this.keyId=Number(t),this.signature=n},encodeAccountProof:Bc,injectExtService:function(e){"authn"===e.type&&null!=e.endpoint?(Array.isArray(window.fcl_extensions)||(window.fcl_extensions=[]),window.fcl_extensions.push(e)):console.warn("Authn service is required")}});const Lc="ACCOUNT_PROOF",Fc="USER_SIGNATURE",Dc=e=>{if(e.appIdentifier){const{appIdentifier:t,address:n,nonce:r,signatures:o}=e;return Ge(ia(t),"verifyAccountProof({ appIdentifier }) -- appIdentifier must be a string"),Ge(ia(n)&&16===ot(n).length,"verifyAccountProof({ address }) -- address must be a valid address"),Ge(/^[0-9a-f]+$/i.test(r),"nonce must be a hex string"),Ge(Array.isArray(o)&&o.every(((e,t,n)=>"CompositeSignature"===e.f_type)),"Must include an Array of CompositeSignatures to verify"),Ge(o.map((e=>e.addr)).every(((e,t,n)=>e===n[0])),"User signatures to be verified must be from a single account address"),!0}{const{message:t,address:n,compSigs:r}=e;return Ge(/^[0-9a-f]+$/i.test(t),"Signed message must be a hex string"),Ge(ia(n)&&16===ot(n).length,"verifyUserSignatures({ address }) -- address must be a valid address"),Ge(Array.isArray(r)&&r.every(((e,t,n)=>"CompositeSignature"===e.f_type)),"Must include an Array of CompositeSignatures to verify"),Ge(r.map((e=>e.addr)).every(((e,t,n)=>e===n[0])),"User signatures to be verified must be from a single account address"),!0}},jc=async(e,t)=>{const n="ACCOUNT_PROOF"===e?"verifyAccountProofSignatures":"verifyUserSignatures";let r,o=await Zo();return Ge(t.fclCryptoContract||"testnet"===o||"mainnet"===o,"${verifyFunction}({ fclCryptoContract }) -- config.flow.network must be specified (testnet || mainnet) or contract address provided via opts.fclCryptoContract"),r=t.fclCryptoContract?t.fclCryptoContract:"testnet"===o?"0x74daa6f9c7ef24b1":"0xb4b82a1c9d21d284",`\n      import FCLCrypto from ${r}\n\n      pub fun main(\n          address: Address, \n          message: String, \n          keyIndices: [Int], \n          signatures: [String]\n      ): Bool {\n        return FCLCrypto.${n}(address: address, message: message, keyIndices: keyIndices, signatures: signatures)\n      }\n    `};async function Gc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=at(t[0].addr);Dc({message:e,address:r,compSigs:t});let o=[],a=[];for(const e of t)o.push(e.signature),a.push(e.keyId.toString());return ni({cadence:await jc(Fc,n),args:(t,n)=>[t(r,n.Address),t(e,n.String),t(a,n.Array(n.Int)),t(o,n.Array(n.String))]})}var $c=Object.freeze({__proto__:null,verifyAccountProof:async function(e,t){let{address:n,nonce:r,signatures:o}=t,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Dc({appIdentifier:e,address:n,nonce:r,signatures:o});const s=Bc({address:n,nonce:r,appIdentifier:e},!1);let i=[],c=[];for(const e of o)i.push(e.signature),c.push(e.keyId.toString());return ni({cadence:await jc(Lc,a),args:(e,t)=>[e(at(n),t.Address),e(s,t.String),e(c,t.Array(t.Int)),e(i,t.Array(t.String))]})},verifyUserSignatures:Gc});const Mc=je.deprecate({pkg:"FCL",subject:"fcl.verifyUserSignatures()",message:"Please use fcl.AppUtils.verifyUserSignatures()",callback:function(e,t){return Gc(e,t)}}),zc="POLL",qc=e=>e.status>=4,Yc=e=>e.status>=3,Hc=e=>e.status>=2,Kc={[s]:async e=>{e.sendSelf(zc)},[i]:(e,t)=>{e.subscribe(t.from),e.send(t.from,u,e.all())},[c]:(e,t)=>{e.unsubscribe(t.from)},[l]:async(e,t)=>{t.reply(e.all())},[zc]:async e=>{let t;try{t=await(async e=>Ao([Bo(e)]).then(Ro))(e.self())}catch(t){return e.fatalError(t)}var n,r;qc(t)||setTimeout((()=>e.sendSelf(zc)),2500),n=e.all(),r=t,JSON.stringify(n)!==JSON.stringify(r)&&e.broadcast(u,t),e.merge(t)}},Wc=e=>{if("object"==typeof e&&(e=e.transactionId),null==e)throw new Error("transactionId required");return e},Vc=e=>b(Kc,Wc(e));function Jc(e){function t(t){return v(Wc(e),Vc,t)}function n(e){return function(){const n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).suppress||!1;return new Promise(((r,o)=>{const a=t(((t,s)=>{!s&&!t.statusCode||n?e(t)&&(r(t),a()):(o(s||t.errorMessage),a())}))}))}}return{snapshot:function(){return E(e,Vc)},subscribe:t,onceFinalized:n(Hc),onceExecuted:n(Yc),onceSealed:n(qc)}}Jc.isUnknown=e=>e.status>=0,Jc.isPending=e=>e.status>=1,Jc.isFinalized=Hc,Jc.isExecuted=Yc,Jc.isSealed=qc,Jc.isExpired=e=>5===e.status;const Xc="TICK",Zc="hwm",Qc=async e=>setTimeout((()=>e.sendSelf(Xc)),await Ue().get("fcl.eventPollRate",1e4)),eu={[Xc]:async e=>{if(!e.hasSubs())return;let t=e.get(Zc);if(null==t)e.put(Zc,await Oo()),e.put(Xc,await Qc(e));else{let n=await Oo();if(e.put(Zc,n),t.height<n.height){const r=await Ao([No(e.self(),t.height+1,n.height)]).then(Ro);for(let t of r)e.broadcast("UPDATED",t.data)}e.put(Xc,await Qc(e))}},[i]:async(e,t)=>{e.hasSubs()||e.put(Xc,await Qc(e)),e.subscribe(t.from)},[c]:(e,t)=>{e.unsubscribe(t.from),e.hasSubs()||(clearTimeout(e.get(Xc)),e.delete(Xc),e.delete(Zc))}},tu=e=>b(eu,e);async function nu(e){const t=new kt.SHA3(256);return t.update($e.Buffer.from(e,"utf8")),t.digest("hex")}async function ru(e){let{template:t}=e;if(ko(null!=t,"generateTemplateId({ template }) -- template must be defined"),ko("object"==typeof t,"generateTemplateId({ template }) -- template must be an object"),ko("InteractionTemplate"==typeof t.f_type,"generateTemplateId({ template }) -- template object must be an InteractionTemplate"),t=Zs(t),"1.0.0"===t.f_version){const e=t.data,n=await Promise.all(Object.keys(e.messages).map((async t=>[await nu(t),await Promise.all(Object.keys(e.messages?.[t]?.i18n).map((async n=>[await nu(n),await nu(e.messages?.[t]?.i18n?.[n])])))]))),r=await Promise.all(Object.keys(e?.dependencies).map((async t=>[await nu(t),await Promise.all(Object.keys(e?.dependencies?.[t]).map((async n=>[await nu(n),await Promise.all(Object.keys(e?.dependencies?.[t]?.[n]).map((async r=>[await nu(r),[await nu(e?.dependencies?.[t]?.[n]?.[r].address),await nu(e?.dependencies?.[t]?.[n]?.[r].contract),await nu(e?.dependencies?.[t]?.[n]?.[r].fq_address),await nu(e?.dependencies?.[t]?.[n]?.[r].pin),await nu(String(e?.dependencies?.[t]?.[n]?.[r].pin_block_height))]])))])))]))),o=await Promise.all(Object.keys(e?.arguments).map((async t=>[await nu(t),[await nu(String(e?.arguments?.[t].index)),await nu(e?.arguments?.[t].type),await nu(e?.arguments?.[t].balance||""),await Promise.all(Object.keys(e?.arguments?.[t].messages).map((async n=>[await nu(n),await Promise.all(Object.keys(e?.arguments?.[t].messages?.[n].i18n).map((async r=>[await nu(r),await nu(e?.arguments?.[t].messages?.[n].i18n?.[r])])))])))]]))),a=Ze([await nu("InteractionTemplate"),await nu("1.0.0"),await nu(e?.type),await nu(e?.interface),n,await nu(e?.cadence),r,o]).toString("hex");return nu(a)}throw new Error("generateTemplateId Error: Unsupported template version")}function ou(e){let{contractName:t,address:n}=e;return{contractName:t,address:n,contract:""}}function au(e){let t=[],n=e.match(/import ((\w|,| )+)* from 0x\w+/g)||[];for(const e of n){const n=/import ((\w+|, |)*) from (0x\w+)/g.exec(e),r=/((?:\w+)+),?/g,o=n[1].match(r)||[];for(const e of o)t.push(ou({address:n[3],contractName:e.replace(/,/g,"")}))}return t}async function su(e){let{address:t,contractName:n,blockHeight:r}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ko(null!=t,"generateDependencyPin({ address }) -- address must be defined"),ko(null!=n,"generateDependencyPin({ contractName }) -- contractName must be defined"),ko(null!=r,"generateDependencyPin({ blockHeight }) -- blockHeight must be defined"),ko("string"==typeof t,"generateDependencyPin({ address }) -- address must be a string"),ko("string"==typeof n,"generateDependencyPin({ contractName }) -- contractName must be a string"),ko("number"==typeof r,"generateDependencyPin({ blockHeight }) -- blockHeight must be a number");let a=[ou({contractName:n,address:t})];for(const e of a){let t=await Ao([lr(await Ue().get(e.address,e.address)),_o(r)],o).then(Ro);if(e.contract=t.contracts?.[e.contractName],!e.contract)throw console.error("Did not find expected contract",e,t),new Error("Did not find expected contract");let n=au(e.contract);a.push(...n)}let s=a.map((e=>nu(e.contract)));return nu(s.join(""))}async function iu(e){let{template:t,blockHeight:n,network:r}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(ko(null!=t,"generateDependencyPin({ template }) -- template must be defined"),ko("object"==typeof t,"generateDependencyPin({ template }) -- template must be an object"),ko("InteractionTemplate"===t.f_type,"generateDependencyPin({ template }) -- template must be an InteractionTemplate"),t=Zs(t),ko(null!=r,"generateDependencyPin({ network }) network must be defined"),ko(null!=n,"generateDependencyPin({ blockHeight }) blockHeight must be defined"),ko("number"==typeof n,"generateDependencyPin({ blockHeight }) blockHeight must be a number"),"1.0.0"===t.f_version){let e=Object.keys(t.data.dependencies);for(let a of e){let e=t.data.dependencies[a],s=Object.keys(e);for(let e of s){let s=t.data.dependencies[a][e][r];if(void 0===s)continue;let i=await su({address:s.address,contractName:s.contract,blockHeight:n},o);if(i!==s.pin)return je({title:"verifyDependencyPinsSame Debug Error",message:`Could not recompute and match dependency pin.\n                                address: ${s.address} | contract: ${s.contract}\n                                computed: ${i}\n                                template: ${s.pin}\n                            `,level:De.debug}),!1}}return!0}throw new Error("verifyDependencyPinsSame Error: Unsupported template version")}var cu=Object.freeze({__proto__:null,getInteractionTemplateAudits:async function(e){let{template:t,auditors:n}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ko(null!=t,"getInteractionTemplateAudits({ template }) -- template must be defined"),t=Zs(t),ko("InteractionTemplate"===t.f_type,"getInteractionTemplateAudits({ template }) -- template must be an InteractionTemplate");let o=await ru({template:t});if(o!==t.id)throw je({title:"getInteractionTemplateAudits Debug Error",message:`Could not recompute and match template ID\n                computed: ${o}\n                template: ${t.id}\n            `,level:De.debug}),new Error("getInteractionTemplateAudits Error: Could not recompute and match template ID");if("1.0.0"===t.f_version){const e=n||await Ue().get("flow.auditors");ko(e,"getInteractionTemplateAudits Error: Required configuration for 'fcl.auditors' is not set"),ko(Array.isArray(e),"getInteractionTemplateAudits Error: Required configuration for 'fcl.auditors' is not an array");let t=r.flowInteractionAuditContract;if(!t){const e=await Zo();ko("mainnet"===e||"testnet"===e,"getInteractionTemplateAudits Error: Unable to determine address for FlowInteractionTemplateAudit contract. Set configuration for 'fcl.network' to 'mainnet' or 'testnet'"),t="mainnet"===e?"0xfd100e39d50a13e6":"0xf78bfc12d0a786dc"}const a=await ni({cadence:`\n        import FlowInteractionTemplateAudit from ${t}\n        pub fun main(templateId: String, auditors: [Address]): {Address:Bool} {\n          return FlowInteractionTemplateAudit.getHasTemplateBeenAuditedByAuditors(templateId: templateId, auditors: auditors)\n        }\n        `,args:(t,n)=>[t(o,n.String),t(e,n.Array(n.Address))]});return a}throw new Error("getInteractionTemplateAudits Error: Unsupported template version")},generateDependencyPin:su,generateDependencyPinAtLatestSealedBlock:async function(e){let{address:t,contractName:n}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=await Oo({sealed:!0},r),a=o?.height;return su({address:t,contractName:n,blockHeight:a},r)},generateTemplateId:ru,generateTemplateInterfaceId:async function(e){let{templateInterface:t}=e;if(ko(null!=t,"generateTemplateInterfaceId({ templateInterface }) -- templateInterface must be defined"),ko("object"==typeof t,"generateTemplateInterfaceId({ templateInterface }) -- templateInterface must be an object"),ko("InteractionTemplateInterface"==typeof t.f_type,"generateTemplateInterfaceId({ templateInterface }) -- templateInterface object must be an InteractionTemplate"),t=function(e){if(null==e)return null;if("1.0.0"===e.f_version)return e;throw new Error("normalizeInteractionTemplateInterface Error: Invalid InteractionTemplateInterface")}(t),"1.0.0"===t.f_version){const e=t.data,n=Ze([await nu("InteractionTemplateInterface"),await nu("1.0.0"),await nu(e.flip),await Promise.all(Object.keys(e.arguments).map((async t=>[await nu(t),await nu(String(e.arguments[t].index)),await nu(e.arguments[t].type)])))]).toString("hex");return nu(n)}throw new Error("generateTemplateInterfaceId Error: Unsupported templateInterface version")},verifyDependencyPinsSame:iu,verifyDependencyPinsSameAtLatestSealedBlock:async function(e){let{template:t,network:n}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=await Oo({sealed:!0}),a=o?.height;return iu({template:t,network:n,blockHeight:a},r)},deriveCadenceByNetwork:Qs,getTemplateMessage:function(e){let{localization:t="en-US",messageKey:n,template:r}=e;ko(n,"getTemplateMessage({ messageKey }) -- messageKey must be defined"),ko("string"==typeof n,"getTemplateMessage({ messageKey }) -- messageKey must be a string"),ko(t,"getTemplateMessage({ localization }) -- localization must be defined"),ko("string"==typeof t,"getTemplateMessage({ localization }) -- localization must be a string"),ko(null!=r,"getTemplateMessage({ template }) -- template must be defined"),ko("object"==typeof r,"getTemplateMessage({ template }) -- template must be an object"),ko("InteractionTemplate"==typeof r.f_type,"getTemplateMessage({ template }) -- template object must be an InteractionTemplate");const o=r?.data?.messages;return o?.[n]?.i18n?.[t]},getTemplateArgumentMessage:function(e){let{localization:t="en-US",argumentLabel:n,messageKey:r,template:o}=e;ko(r,"getTemplateArgumentMessage({ messageKey }) -- messageKey must be defined"),ko("string"==typeof r,"getTemplateArgumentMessage({ messageKey }) -- messageKey must be a string"),ko(n,"getTemplateArgumentMessage({ argumentLabel }) -- argumentLabel must be defined"),ko("string"==typeof r,"getTemplateArgumentMessage({ argumentLabel }) -- argumentLabel must be a string"),ko(t,"getTemplateArgumentMessage({ localization }) -- localization must be defined"),ko("string"==typeof t,"getTemplateArgumentMessage({ localization }) -- localization must be a string"),ko(null!=o,"getTemplateArgumentMessage({ template }) -- template must be defined"),ko("object"==typeof o,"getTemplateArgumentMessage({ template }) -- template must be an object"),ko("InteractionTemplate"==typeof o.f_type,"getTemplateArgumentMessage({ template }) -- template object must be an InteractionTemplate");const a=o?.data?.arguments;return a?.[n]?.messages?.[r]?.i18n?.[t]}});const uu=Cc().authorization,lu=Ws;e.AppUtils=$c,e.InteractionTemplateUtils=cu,e.TestUtils=Jo,e.VERSION=ra,e.WalletUtils=Uc,e.account=function(e){let{height:t,id:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return Ge(!(n&&t),'Method: account -- Cannot pass "id" and "height" simultaneously'),n?Ao([lr(e),xo(n)],r).then(wr):t?Ao([lr(e),_o(t)],r).then(wr):Ao([lr(e)],r).then(wr)},e.arg=Do,e.args=Fo,e.atBlockHeight=_o,e.atBlockId=xo,e.authenticate=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Cc().authenticate(e)},e.authorization=function(e,t,n,r){return{addr:e,signingFunction:t,keyId:n,sequenceNum:r}},e.authorizations=Po,e.authz=uu,e.block=Oo,e.build=ir,e.cadence=Ft,e.cdc=Ft,e.config=Ue,e.createSignableVoucher=po,e.currentUser=Cc,e.decode=Ro,e.discovery=cc,e.display=function(e){return at(e)},e.events=function(e){return{subscribe:t=>v(e,tu,t)}},e.getAccount=lr,e.getBlock=ur,e.getBlockHeader=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return tr([Bn,t=>(t.block.isSealed=e,bn(t))])},e.getChainId=Zo,e.getCollection=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return tr([Un,t=>(t.collection.id=e,t)])},e.getEvents=function(e,t,n){return void 0===t&&void 0===n||je.deprecate({pkg:"FCL/SDK",subject:"Passing a start and end into getEvents",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0005-deprecate-start-end-get-events-builder"}),tr([On,r=>(r.events.eventType=e,r.events.start=t,r.events.end=n,bn(r))])},e.getEventsAtBlockHeightRange=No,e.getEventsAtBlockIds=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return tr([On,n=>(n.events.eventType=e,n.events.blockIds=t,bn(n))])},e.getNetworkParameters=Uo,e.getTransaction=function(e){return tr([_n,t=>(t.transaction.id=e,bn(t))])},e.getTransactionStatus=Bo,e.invariant=ko,e.isBad=Xn,e.isOk=Jn,e.limit=Lo,e.logIn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Cc().authenticate(e)},e.mutate=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{await async function(e){return ti("mutate",e)}(e),e=await ei(e);const t=await Ue().get("fcl.authz",Cc().authorization);return Ue().overload(e.dependencies||{},(async()=>Ao([Yo(e.cadence),Fo(Vs(e.args||[])),e.limit&&ua(e.limit)&&Lo(e.limit),jo(e.proposer||e.authz||t),Go(e.payer||e.authz||t),Po(e.authorizations||[e.authz||t])]).then(Ro)))}catch(e){throw e}},e.param=e=>je.deprecate({pkg:"FCL/SDK",message:"The param builder has been removed from the Flow JS-SDK/FCL.",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params",level:De.error}),e.params=e=>je.deprecate({pkg:"FCL/SDK",message:"The params builder has been removed from the Flow JS-SDK/FCL.",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params",level:De.error}),e.payer=Go,e.ping=function(){return Pn},e.pipe=tr,e.pluginRegistry=Xi,e.proposer=jo,e.query=ni,e.reauthenticate=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Cc().unauthenticate(),Cc().authenticate(e)},e.ref=$o,e.sansPrefix=ot,e.script=Mo,e.send=Ao,e.serialize=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await Ue.first(["sdk.resolve"],t.resolve||So);return Array.isArray(e)&&(e=await tr(un(),e)),JSON.stringify(po(await n(e)),null,2)},e.signUp=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Cc().authenticate(e)},e.t=lu,e.transaction=Yo,e.tx=Jc,e.unauthenticate=()=>Cc().unauthenticate(),e.validator=Co,e.verifyUserSignatures=Mc,e.voucherIntercept=function(e){return or("ix.voucher-intercept",e)},e.voucherToTxId=e=>(e=>$r(Gr(Hr(e))))(e),e.why=Zn,e.withPrefix=at,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=fcl.umd.min.js.map
